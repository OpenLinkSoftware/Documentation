<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xml:id="ch-installation">
    <title>Installation Guide</title>
    <info>
      <abstract>
        <para>This chapter applies exclusively to the various commercial releases of Virtuoso.  If you are working with the open source version, please refer to the instructions on the web site where you obtained it.
</para>
        <para>
This chapter describes how to install OpenLink Virtuoso VDBMS.  It
contains both a quick start install guide and full walk through install guides
for major platforms.</para>
        <para>Virtuoso has been designed from the ground-up to be easy to implement.</para>
        <para>The installation generally runs without problems, run the setup program or script and follow
	the on screen instruction prompts.  You will be asked some questions, if in any doubt please follow
	the instructions in this guide in order to install and configure your Virtuoso components correctly. </para>
        <para>Once installed, each instance of Virtuoso is controlled by an
INI (initialization) file.  This file links the Virtuoso Server
process with an actual database file or device.  For example, the demo
instance of Virtuoso on all platforms is controlled by the demo.ini
file that is found in the demo directory along with the demo.db and
related files.  There is a one-to-one relationship between server
processes and database files.</para>
        <para>The INI file is a text file consisting of keys and key values.
You will set several of these values during installation.  At any time
thereafter, their values can be changed by editing the INI file with a
standard text editor.</para>
        <para>The details of the INI file sections, keys, and the meanings of
the key values are described in the <link linkend="configsrvstupfiles">Configuring Server Startup Files</link>

section.
</para>
      </abstract>
    </info>
    &installallplatforms;
      
    &installwin32;
      
    <!-- obsolete

<section
xml:id="linuxinstall">
		<title>Virtuoso for Linux (Enterprise Edition)</title>

<section
xml:id="b4instlin">
			<title>Before You Install</title>
			<para>To ensure a smooth installation, please review the
      following checklist before you start the setup program.</para>

<section
xml:id="linhavudld">
				<title>Have you downloaded the software?</title>
				<para>If you have not already done so, please download your copy of OpenLink
      Virtuoso from the Virtuoso web site.  The URL is
		<ulink url="http://www.openlinksw.com/virtuoso/">http://www.openlinksw.com/virtuoso/</ulink>.
		When you visit the site, select &quot;Software Download&quot;.</para>
			</section>

<section
xml:id="linreinstvirt">
				<title>Reinstalling Virtuoso?</title>
				<para>If you are reinstalling Virtuoso, you must first stop
      the Database Servers. You can shut these services down with the following command
      executed from your Linux shell prompt:</para>
				<para>Beta 1 Users</para>
				<programlisting>sh virtuoso-lite.rc stop</programlisting>
				<para>or</para>
				<programlisting>virtuoso-lite.rc stop</programlisting>
				<para>or</para>
				<programlisting>./virtuoso-lite.rc stop</programlisting>
				<para>Beta 2 Users</para>
				<programlisting>sh virtuoso-stop.sh</programlisting>
				<para>or</para>
				<programlisting>virtuoso-stop.sh</programlisting>
				<para>or</para>
				<programlisting>./virtuoso-stop.sh</programlisting>
				<para>You may also want to first uninstall prior Virtuoso RPM packages.</para>
				<para>The following command (executed as root) can be used to uninstall the package:</para>
				<programlisting>rpm -e virtuoso-lite-1.1-3_glibc2</programlisting>
				<para>or</para>
				<programlisting>rpm -e virtuoso-enterprise-1.1-3_glibc2</programlisting>
				<para>or</para>
				<programlisting>rpm -e virtuoso-lite-1.1-3_libc5</programlisting>
				<para>depending on Linux system and Virtuoso Server being used.</para>
			</section>

<section
xml:id="linportsfree">
				<title>Are ports 1111,1112, 8889 and 8890 free?</title>
				<para>During the installation you will be prompted for an HTTP port number for
				use by each Virtuoso System Manager. If you are already running a web server
      or other listener on that port, you will encounter problems, and should choose another
      free port when you are prompted.  </para>
				<para>By default, the Virtuoso DBMS listens on port 1111, and the Demo Database
      on 1112. If these ports is currently in use by another server then after the installation completes,
      you will need to change the port numbers in the Local Virtuoso ODBC or UDBC DSN that is
      created during the installation process, and also in the following file:</para>
				<programlisting>$&lt;Directory where Virtuoso is installed&gt;/bin/virtuoso.ini</programlisting>
				<para>typically</para>
				<programlisting>/usr/local/virtuoso</programlisting>
				<para>but can of course be any location of your choosing.</para>
				<para>To check if a port is in use you can use the following command, and review the output:</para>
				<programlisting>netstat -an | more </programlisting>
			</section>

<section
xml:id="lindouvirtuser">
				<title>Do you already have a &quot;virtuoso&quot; user account on your Linux system?</title>
				<para>Although this is no longer a requirement of the installation it
may be suitable to create a new Virtuoso user account for administering the Virtuoso
server.</para>
			</section>

<section
xml:id="liniodbc">
				<title>Do you already have functional iODBC data sources on your system?</title>
				<para>The OpenLink Virtuoso for Linux installation presumes the following:</para>
				<simplelist>
					<member>You intend to connect to a Local Virtuoso server using iODBC
          or OpenLink  UDBC</member>
					<member>You intend to connect to one or more Remote Virtuoso servers
          on your network using iODBC or UDBC </member>
					<member>You intend to Attach tables hosted within non-local or
          Remote Virtuoso database servers, into a Local or Remote Virtuoso Server</member>
					<member>The existence of functional OpenLink or third-party iODBC
          drivers for Linux that connect to the non database servers referred to above.</member>
					<member>In the absence of iODBC drivers for your non Virtuoso
          database, that a functional OpenLink or third-party UDBC Drivers exists for these database
          servers. </member>
				</simplelist>
				<para>Instructions on how to manually configure iODBC Data Source
      Names is available at the following URL:
      <ulink url="http://www.openlinksw.com/info/docs/rel3doc/unix/odbcsdk.htm">http://www.openlinksw.com/info/docs/rel3doc/unix/odbcsdk.htm</ulink>
      If you are using OpenLink Multi-Tier ODBC
      Drivers for your remote database connections then we highly recommend the use of the Virtuoso
      System Manager for creating iODBC Data Source Names.</para>
			</section>

<section
xml:id="liniodbcdsnfunc">
				<title>Are your iODBC Data Source Names functional?</title>
				<para>It is a useful sanity-check to ensure that your iODBC or UDBC
      data sources are functional, OpenLink provides an &quot;odbctest&quot; program for
      verifying basic usability of iODBC data sources. Both of these programs reside in the
      &quot;samples&quot; directory situated beneath the directory into which RPM installs
      Virtuoso.</para>
			</section>
		</section>

<section
xml:id="instproclinux">
			<title>Installation Process</title>
			<para>Once you have downloaded the required tar file from the
web or ftp site and have placed the file in a designated installation directory you are
ready to commence the Virtuoso installation process. </para>
			<para>You may want to specify a new user to own the Virtuoso
installation and then you can place the installation tar file into that users home
directory.</para>
<orderedlist>
  <listitem><para>First step is to un-tar the file to obtain the install script
  and archive file.  Use the following command:</para>
  <programlisting>tar xvf &lt;tar file&gt;.tar</programlisting>
  <para>replacing &lt;tar file&gt; with the relevant name of the file you downloaded.</para></listitem>
  <listitem><para>run the install script using the following command:</para>
<programlisting>[virtuoso@myserver virtuoso]$ sh /install.sh</programlisting>
  <para>The installation process will now begin and prompt you for required information.</para>
</listitem>

<listitem>
<para>The install script will first try and detect running Virtuoso server instances.
In cases where an old Virtuoso server is being upgraded you must ensure that
the old Virtuoso is first shutdown.  It is advisable that you backup up your
systems before continuing.</para>
<programlisting><![CDATA[
Checking requested components
Checking for existing installations and/or instances of Virtuoso...
 7269 ?        00:06:23 virtuoso
/proc/net/tcp: Permission denied

** Alert: [running processes; ]

** Warning: You have Virtuoso previously installed on this machine.
**
** To avoid existing data being overwritten or lost, you may press ^C to
** exit this installer, terminate and remove the existing installation,
** or proceed taking care to enter non-conflicting data below, by pressing
** Enter.
]]></programlisting>
</listitem>

<listitem>
<para>If you are upgrading a server then the installer will save copies of
old configuration data for later use.</para>
<programlisting><![CDATA[
Preserving any existing configurations...
find: db: No such file or directory
find: demo: No such file or directory
find: bin: No such file or directory
0 blocks
]]></programlisting>
</listitem>

<listitem>
<para>You should have received a license file via email.  This file should be
copied to the server installation directory prior to installation.  The installer
will ask you for its location if none is found.  If you do not have the license
file at this time the installer will still continue.</para>
<programlisting><![CDATA[
Checking licensing...

A license file is required for the Virtuoso Server Instance(s) to
start. Please enter the full path and name of a valid Virtuoso
license file [./virtuoso.lic]:
]]></programlisting>
</listitem>

<listitem>
<para>Now the installer will continue to install files from the package.  Every
file installed will be echoed to the screen.  </para>
<programlisting><![CDATA[
Unpacking enterprise.tar.Z
bin/
bin/v27/
bin/v27/bin/
...
...
vsp/releasenotes.css
vsp/releasenotes.html
vsp/vsp_auth.sql
...done
]]></programlisting>
</listitem>

<listitem>
<para>When the files have been installed from the package the location
supplied for the license file will be checked.  If one is not found then you will
receive the following warning:</para>
<programlisting><![CDATA[
**
**  WARNING: The license file entered is not valid or does not exist.
**           You will need to copy a valid license file manually
**           to the demo and db directories after the Virtuoso installation completes.
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso server installation has a few variations.  The next question
from the installer asks which one you want to make default.  Even though each
variation is installed, a convenient symbolic link will be made to
<computeroutput>bin/virtuoso</computeroutput> from the selected type.
Running <computeroutput>ls -l</computeroutput> in the bin directory after
installation will reveal all.</para>
<programlisting><![CDATA[
Checking for installed optional components...
Please choose which Virtuoso server you wish to install:
  1) Universal Server
  2) Universal Server with iODBC
  3) Universal Server with iODBC and support for Java
  4) Universal Server with iODBC and support for PHP
  5) Universal Server with iODBC and support for Java and PHP
  6) Universal Server with iODBC and support for CLR Hosting via Mono
  7) Universal Server with iODBC and support for CLR and Java
  8) Universal Server with iODBC and support for CLR, Java and PHP4

[8] :
]]></programlisting>
</listitem>

<listitem>
<para>The installer will search for required third-party components
depending on which option is selected in the previous step.  For example, choosing
the Virtuoso with Java support will require a Java runtime.  Results of the
search are listed as suggestions from which you can confirm or type
the actual location.</para>
<programlisting><![CDATA[
Attempting to locate the java runtime library (libjvm.so)...

Suggested file locations:
/usr/local/lib
/usr/local/jdk1.3/jre/lib/i386/classic
/usr/local/jdk1.3/jre/lib/i386/server
/usr/local/jdk1.3/jre/lib/i386/client
/usr/opt/blackdown-jdk-1.3.1/jre/lib/i386/classic
/usr/opt/blackdown-jdk-1.3.1/jre/lib/i386/server
/usr/opt/blackdown-jdk-1.3.1/jre/lib/i386/client
/usr/local/jdk1.3/jre/lib/i386/classic
/usr/local/jdk1.3/jre/lib/i386/server
/usr/local/jdk1.3/jre/lib/i386/client

Please select one of the above locations or press Enter to use
the default (/usr/local/jdk1.3/jre/lib/i386/client):
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso installer includes a Mono runtime distribution, since
Mono is a developing platform you may have your own installation that you
can supply the path to here.</para>
<programlisting><![CDATA[
Please enter the full path to the Mono installation directory or
Enter to use the default (/home/openlink/virtuoso/mono)
]]></programlisting>
</listitem>

<listitem>
<para>Virtuoso now has enough information to configure its environment and
startup scripts.</para>
<programlisting><![CDATA[
Setting up initial values in scripts and config files
Setting up file bin/odbc.ini
Setting up file bin/odbcinst.ini
Setting up file bin/demo-start.sh
Setting up file bin/demo-stop.sh
Setting up file bin/virtuoso-start.sh
Setting up file bin/virtuoso-stop.sh
Setting up file db/virtuoso.ini
Setting up file demo/demo.ini
Setting up file mono/bin/mcs
Setting up file virtuoso-enterprise.csh
Setting up file virtuoso-enterprise.sh
Setting up file initd_startup.template
Setting up file initd_startup_demo.template
]]></programlisting>
</listitem>

<listitem>
<para>The installer will now ask a series of questions for configuring the
Virtuoso .INI files.  First confirm or alter the default database SQL listener
port number.  This is the port number that this database will be available for
ODBC connections and iSQL sessions.</para>
<programlisting><![CDATA[
Configuring port numbers for default and demo databases

Please enter a port on which to run the default database
SQL listener (default 1111):
]]></programlisting>
</listitem>

<listitem>
<para>Now you must specify the port number of the default database HTTP
listener.  This is the HTTP port that Virtuoso will listen on by default, you web-based
administration interface for Virtuoso will be found here.  If you confirm the
default of 8889, then your Virtuoso will be available from:
<computeroutput>http://server:8889/</computeroutput>, changing
server to the name of your machine appropriately.</para>
<programlisting><![CDATA[
Please enter a port on which to run the default database
HTTP listener (default 8889):
]]></programlisting>
</listitem>

<listitem>
<para>Now you must supply a friendly name that you wish to identify
your Virtuoso server by on the network using Zero Configuration.  </para>
<tip><title>See Also:</title>
<para>The <link linkend="rendezvous">Zero Configuration</link> section.</para></tip>
<programlisting><![CDATA[
Please enter a name for default database Zero Configuration
(default "Virtuoso Universal Server at myserver:1111"):
]]></programlisting>
</listitem>

<listitem>
<para>The Zero Configuration details need a default username to make the connection with.</para>
<programlisting><![CDATA[
Please enter a user name for default database Zero Configuration
(default "dba"):
]]></programlisting>
</listitem>

<listitem>
<para>Now we have all of the above details to supply again for the Demo Virtuoso
database.  The port number supplied here must be different to those supplied previously.</para>
<programlisting><![CDATA[
Please enter a port on which to run the demo database
SQL listener (default 1112):

Please enter a port on which to run the demo database
HTTP listener (default 8890):

Please enter a name for demonstration database Zero Configuration
(default Virtuoso Universal Server (demonstration) at myserver:1112):

Please enter a user name for demonstration database Zero Configuration
(default demo):
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso servers have default administrator usernames of "dba".
The "dba" accounts have the default password of "dba".  It is recommended that
you alter this as soon as possibly for security.  The installer now provides the
opportunity to do this the first time the server is started.</para>
<programlisting><![CDATA[
Changing passwords for the Database Universal Server

Please enter a replacement for the Default Database Server's
SQL Administrative (dba) account password (twice) :
Confirm Password :
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso servers have default WebDAV administrator usernames
of "dav".   The "dav" accounts have the default password of "dav".  It is
recommended that you alter this as soon as possibly for security.
The installer now provides the opportunity to do this the first time
the server is started.</para>
<programlisting><![CDATA[
Please enter a replacement for the Default Database's
WebDAV administrative (dav) account password (twice) :
Confirm Password :

Please wait while the passwords are changed:

Changing passwords for the Demo Universal Server
]]></programlisting>
</listitem>

<listitem>
<para>Likewise for the Demo server, you can change the default passwords:</para>
<programlisting><![CDATA[
Please enter a replacement for the Demonstration Database Server's
SQL Administrative (dba) account password (twice) :
Confirm Password :

Please enter a replacement for the Demonstration Database Server's
WebDAV Administrative (dav) account password (twice) :
Confirm Password :

Please wait while the passwords are changed:
done.
]]></programlisting>
</listitem>

<listitem>
<para>The file owner and group is changed at the end of the installation.  You
can choose what these shall be set to.  By default the current user is selected.</para>
<programlisting><![CDATA[
Please enter the username:group for the user and group who should own
files in this installation (default: openlink:openlink) :
Setting owners:
]]></programlisting>
</listitem>

<listitem>
<para>Finally the installer can start Virtuoso servers installed for you, but
only if a valid license key has been supplied.</para>
<programlisting><![CDATA[
The Virtuoso Installer has not offered to start a database as
no license key was found. Evaluation users should receive
one via e-mail; in case of difficulties please contact
<Technical.Support@openlinksw.com>.
]]></programlisting>
</listitem>
</orderedlist>
		</section>

<section
xml:id="linuxinstpost"><title>Post Installation</title>

<section
xml:id="linuxinstpostsan">
			<title>Post-Installation Sanity Check</title>
			<para>A quick way to check that the database is running, is to point a browser to the
			http port. The following example URLs will show the System Manager for
			the default, and the demo Virtuoso databases:</para>
			<programlisting>http://example.com
http://example.com
http://a_virtuoso_server.org:8890</programlisting>
		</section>

<section
xml:id="linuxinstposttrb"><title>Troubleshooting DB Startup Failures</title>
  <para><emphasis>Install failure</emphasis></para>
  <para>Check the .log file in:</para>
<programlisting><![CDATA[
$<Directory where Virtuoso is installed>/bin/virtuoso.log
]]></programlisting>
 <para>in order to review the installed files binaries and databases (defaults)
 for issues if install fails.</para>
   <para><emphasis>.lck existance</emphasis></para>
   <para>Check .log in case of .lck issue</para>
   <para>Delete the .lck file and repeat the steps from above.</para>
   <para><emphasis>.trx incompatiblity issue</emphasis></para>
   <para>Check .log in case of .trx incompatiblity issue</para>
    <para><emphasis>oplmgr issue</emphasis></para>
   <para>See <link linkend="oplmngrlfla">OpenLink License Management for Linux</link></para>
  </section>
  </section>

<section
xml:id="linautovirt"><title>Starting Virtuoso Automatically on Reboot</title>

    <para>Two files, named initd_startup.template and
    initd_startup_demo.template, are placed in the top level of the
    Virtuoso installation directory.  On systems using SysVinit (most Linux
    distributions, Solaris) the appropriate one should be copied into
    /etc/init.d/ and symlinks created in the rcN.d/ directories, e.g.:</para>

<programlisting><![CDATA[
bash# cp initd_startup.template /etc/init.d/virtuoso
]]></programlisting>

    <para>Perform some sanity checks here, that the directory it uses exists, etc:</para>

<programlisting><![CDATA[
bash# vi /etc/init.d/virtuoso
]]></programlisting>

    <para>Test that it works correctly:</para>

<programlisting><![CDATA[
bash# /etc/init.d/virtuoso stop
bash# /etc/init.d/virtuoso start
]]></programlisting>

    <para>Finally, create symbolic links in the regular runlevel directories
    pointing to that script:</para>

<programlisting><![CDATA[
bash# cd /etc/rc2.d ; ln -s ../init.d/virtuoso S99virtuoso
bash# cd /etc/rc3.d ; ln -s ../init.d/virtuoso S99virtuoso
bash# cd /etc/rc5.d ; ln -s ../init.d/virtuoso S99virtuoso
]]></programlisting>

    <para>Virtuoso should now start when the service is restarted.</para>
    </section>

<section
xml:id="defpasschglin">
			<title>Default passwords</title>
			<para>See the following Quick Start chapter for very important information about
			<link linkend="defpasschange">changing the default passwords</link>.</para>
		</section>
	</section>

<section
xml:id="unxinstvirt">
		<title>Virtuoso for Unix (Enterprise Edition)</title>

<section
xml:id="b4instunx">
			<title>Before You Install</title>
			<para>To ensure a smooth installation, please review the
      following checklist before you start the setup program.</para>

<section
xml:id="unxdldsw">
				<title>Have you downloaded the software?</title>
				<para>If you have not already done so, please download your copy of OpenLink
      Virtuoso from the Virtuoso web site.  The URL is
		<ulink url="http://www.openlinksw.com/virtuoso/">http://www.openlinksw.com/virtuoso/</ulink>.
		When you visit the site, select &quot;Software Download&quot;.</para>
			</section>

<section
xml:id="unxreinstvirt">
				<title>Reinstalling Virtuoso?</title>
				<para>If you are reinstalling Virtuoso, you must first stop the Database Servers.
				You can shut these services down with the following command
				executed from your UNIX shell prompt:</para>
				<programlisting>sh virtuoso-stop.sh </programlisting>
				<para>or</para>
				<programlisting>virtuoso-stop.sh</programlisting>
				<para>or</para>
				<programlisting>./virtuoso-stop.sh</programlisting>
			</section>

<section
xml:id="unxfreeports">
				<title>Are ports 1111, 1112, 8889 and 8890 free?</title>
				<para>During the installation you will be prompted for an HTTP port number for
				use by each Virtuoso System Manager. If you are already running a web server
      or other listener on that port, you will encounter problems, and should choose another
      free port when you are prompted.  </para>
				<para>By default, the Virtuoso DBMS listens on port 1111.
      If this port is currently in use by another server then after the installation completes
      you will need to change the port number in the Local Virtuoso ODBC or UDBC DSN that is
      created during the installation process, and also in the following file:</para>
				<programlisting>
$&lt;Installation Directory&gt;/bin/virtuoso.ini</programlisting>
				<para>typically</para>
				<programlisting>/usr/home/virtuoso</programlisting>
				<para>To check if a port is in use you can use the following
      command, and review the output:</para>
				<programlisting>netstat -an | more </programlisting>
			</section>

<section
xml:id="unxvirtuser">
				<title>Do you already have a &quot;virtuoso&quot; user
      account on your UNIX system ?</title>
				<para>Please create a UNIX user account called &quot;virtuoso&quot;.</para>
			</section>

<section
xml:id="unxiodbcexist">
				<title>Do you already have functional iODBC data sources
      on your system ?</title>
				<para>The OpenLink Virtuoso for UNIX installation presumes the following:</para>
				<simplelist>
					<member>You intend to connect to a Local Virtuoso server using iODBC
          or OpenLink  UDBC</member>
					<member>You intend to connect to one or more Remote Virtuoso servers
          on your network using iODBC or UDBC</member>
					<member>You intend to Attach tables hosted within non-local or
          Remote Virtuoso database servers, into a Local or Remote Virtuoso Server</member>
					<member>The existence of functional OpenLink or third-party iODBC
          drivers for UNIX that connect to the non database servers referred to above.</member>
					<member>In the absence of iODBC drivers for your non Virtuoso
          database, that a functional OpenLink or third-party UDBC Drivers exists for these database
          servers. </member>
				</simplelist>
				<para>If you are using OpenLink Multi-Tier ODBC
      Drivers for your remote database connections then we highly recommend the use of the Web
      Assistant for creating iODBC Data Source Names.</para>
			</section>

<section
xml:id="unxiodbcfunc">
				<title>Are your iODBC Data Source Names functional ?</title>
				<para>It is a useful sanity-check to ensure that your iODBC or UDBC
      data sources are functional, OpenLink provides an &quot;odbctest&quot; program for
      verifying basic usability of iODBC data sources. Both of these programs reside in the
      &quot;samples&quot; directory situated beneath the directory into which Virtuoso is
      installed.</para>
			</section>
		</section>

<section
xml:id="instprocunx"><title>Installation Process</title>
			<para>Once you have downloaded the required tar file from the
web or ftp site and have placed the file in a designated installation directory you are
ready to commence the Virtuoso installation process. </para>
			<para>You may want to specify a new user to own the Virtuoso
installation and then you can place the installation tar file into that users home
directory.</para>
<orderedlist>
  <listitem><para>First step is to un-tar the file to obtain the install script
  and archive file.  Use the following command:</para>
  <programlisting>tar xvf &lt;tar file&gt;.tar</programlisting>
  <para>replacing &lt;tar file&gt; with the relevant name of the file you downloaded.</para></listitem>
  <listitem><para>run the install script using the following command:</para>
<programlisting>[virtuoso@myserver virtuoso]$ sh /install.sh</programlisting>
  <para>The installation process will now begin and prompt you for required information.</para>
</listitem>

<listitem>
<para>The install script will first try and detect running Virtuoso server instances.
In cases where an old Virtuoso server is being upgraded you must ensure that
the old Virtuoso is first shutdown.  It is advisable that you backup up your
systems before continuing.</para>
<programlisting><![CDATA[
Checking requested components
Checking for existing installations and/or instances of Virtuoso...
 7269 ?        00:06:23 virtuoso
/proc/net/tcp: Permission denied

** Alert: [running processes; ]

** Warning: You have Virtuoso previously installed on this machine.
**
** To avoid existing data being overwritten or lost, you may press ^C to
** exit this installer, terminate and remove the existing installation,
** or proceed taking care to enter non-conflicting data below, by pressing
** Enter.
]]></programlisting>
</listitem>

<listitem>
<para>If you are upgrading a server then the installer will save copies of
old configuration data for later use.</para>
<programlisting><![CDATA[
Preserving any existing configurations...
find: db: No such file or directory
find: demo: No such file or directory
find: bin: No such file or directory
0 blocks
]]></programlisting>
</listitem>

<listitem>
<para>You should have received a license file via email.  This file should be
copied to the server installation directory prior to installation.  The installer
will ask you for its location if none is found.  If you do not have the license
file at this time the installer will still continue.</para>
<programlisting><![CDATA[
Checking licensing...

A license file is required for the Virtuoso Server Instance(s) to
start. Please enter the full path and name of a valid Virtuoso
license file [./virtuoso.lic]:
]]></programlisting>
</listitem>

<listitem>
<para>Now the installer will continue to install files from the package.  Every
file installed will be echoed to the screen.  </para>
<programlisting><![CDATA[
Unpacking enterprise.tar.Z
bin/
bin/v27/
bin/v27/bin/
...
...
vsp/releasenotes.css
vsp/releasenotes.html
vsp/vsp_auth.sql
...done
]]></programlisting>
</listitem>

<listitem>
<para>When the files have been installed from the package the location
supplied for the license file will be checked.  If one is not found then you will
receive the following warning:</para>
<programlisting><![CDATA[
**
**  WARNING: The license file entered is not valid or does not exist.
**           You will need to copy a valid license file manually
**           to the demo and db directories after the Virtuoso installation completes.
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso server installation has a few variations.  The next question
from the installer asks which one you want to make default.  Even though each
variation is installed, a convenient symbolic link will be made to
<computeroutput>bin/virtuoso</computeroutput> from the selected type.
Running <computeroutput>ls -l</computeroutput> in the bin directory after
installation will reveal all.</para>
<programlisting><![CDATA[
Checking for installed optional components...
Please choose which Virtuoso server you wish to install:
  1) Universal Server
  2) Universal Server with iODBC
  3) Universal Server with iODBC and support for Java
  4) Universal Server with iODBC and support for PHP
  5) Universal Server with iODBC and support for Java and PHP
  6) Universal Server with iODBC and support for CLR Hosting via Mono
  7) Universal Server with iODBC and support for CLR and Java
  8) Universal Server with iODBC and support for CLR, Java and PHP4

[8] :
]]></programlisting>
</listitem>

<listitem>
<para>The installer will search for required third-party components
depending on which option is selected in the previous step.  For example, choosing
the Virtuoso with Java support will require a Java runtime.  Results of the
search are listed as suggestions from which you can confirm or type
the actual location.</para>
<programlisting><![CDATA[
Attempting to locate the java runtime library (libjvm.so)...

Suggested file locations:
/usr/local/lib
/usr/local/jdk1.3/jre/lib/i386/classic
/usr/local/jdk1.3/jre/lib/i386/server
/usr/local/jdk1.3/jre/lib/i386/client
/usr/opt/blackdown-jdk-1.3.1/jre/lib/i386/classic
/usr/opt/blackdown-jdk-1.3.1/jre/lib/i386/server
/usr/opt/blackdown-jdk-1.3.1/jre/lib/i386/client
/usr/local/jdk1.3/jre/lib/i386/classic
/usr/local/jdk1.3/jre/lib/i386/server
/usr/local/jdk1.3/jre/lib/i386/client

Please select one of the above locations or press Enter to use
the default (/usr/local/jdk1.3/jre/lib/i386/client):
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso installer includes a Mono runtime distribution, since
Mono is a developing platform you may have your own installation that you
can supply the path to here.</para>
<programlisting><![CDATA[
Please enter the full path to the Mono installation directory or
Enter to use the default (/home/openlink/virtuoso/mono)
]]></programlisting>
</listitem>

<listitem>
<para>Virtuoso now has enough information to configure its environment and
startup scripts.</para>
<programlisting><![CDATA[
Setting up initial values in scripts and config files
Setting up file bin/odbc.ini
Setting up file bin/odbcinst.ini
Setting up file bin/demo-start.sh
Setting up file bin/demo-stop.sh
Setting up file bin/virtuoso-start.sh
Setting up file bin/virtuoso-stop.sh
Setting up file db/virtuoso.ini
Setting up file demo/demo.ini
Setting up file mono/bin/mcs
Setting up file virtuoso-enterprise.csh
Setting up file virtuoso-enterprise.sh
Setting up file initd_startup.template
Setting up file initd_startup_demo.template
]]></programlisting>
</listitem>

<listitem>
<para>The installer will now ask a series of questions for configuring the
Virtuoso .INI files.  First confirm or alter the default database SQL listener
port number.  This is the port number that this database will be available for
ODBC connections and iSQL sessions.</para>
<programlisting><![CDATA[
Configuring port numbers for default and demo databases

Please enter a port on which to run the default database
SQL listener (default 1111):
]]></programlisting>
</listitem>

<listitem>
<para>Now you must specify the port number of the default database HTTP
listener.  This is the HTTP port that Virtuoso will listen on by default, you web-based
administration interface for Virtuoso will be found here.  If you confirm the
default of 8889, then your Virtuoso will be available from:
<computeroutput>http://server:8889/</computeroutput>, changing
server to the name of your machine appropriately.</para>
<programlisting><![CDATA[
Please enter a port on which to run the default database
HTTP listener (default 8889):
]]></programlisting>
</listitem>

<listitem>
<para>Now you must supply a friendly name that you wish to identify
your Virtuoso server by on the network using Zero Configuration.  </para>
<tip><title>See Also:</title>
<para>The <link linkend="rendezvous">Zero Configuration</link> section.</para></tip>
<programlisting><![CDATA[
Please enter a name for default database Zero Configuration
(default "Virtuoso Universal Server at myserver:1111"):
]]></programlisting>
</listitem>

<listitem>
<para>The Zero Configuration details need a default username to make the connection with.</para>
<programlisting><![CDATA[
Please enter a user name for default database Zero Configuration
(default "dba"):
]]></programlisting>
</listitem>

<listitem>
<para>Now we have all of the above details to supply again for the Demo Virtuoso
database.  The port number supplied here must be different to those supplied previously.</para>
<programlisting><![CDATA[
Please enter a port on which to run the demo database
SQL listener (default 1112):

Please enter a port on which to run the demo database
HTTP listener (default 8890):

Please enter a name for demonstration database Zero Configuration
(default Virtuoso Universal Server (demonstration) at myserver:1112):

Please enter a user name for demonstration database Zero Configuration
(default demo):
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso servers have default administrator usernames of "dba".
The "dba" accounts have the default password of "dba".  It is recommended that
you alter this as soon as possibly for security.  The installer now provides the
opportunity to do this the first time the server is started.</para>
<programlisting><![CDATA[
Changing passwords for the Database Universal Server

Please enter a replacement for the Default Database Server's
SQL Administrative (dba) account password (twice) :
Confirm Password :
]]></programlisting>
</listitem>

<listitem>
<para>The Virtuoso servers have default WebDAV administrator usernames
of "dav".   The "dav" accounts have the default password of "dav".  It is
recommended that you alter this as soon as possibly for security.
The installer now provides the opportunity to do this the first time
the server is started.</para>
<programlisting><![CDATA[
Please enter a replacement for the Default Database's
WebDAV administrative (dav) account password (twice) :
Confirm Password :

Please wait while the passwords are changed:

Changing passwords for the Demo Universal Server
]]></programlisting>
</listitem>

<listitem>
<para>Likewise for the Demo server, you can change the default passwords:</para>
<programlisting><![CDATA[
Please enter a replacement for the Demonstration Database Server's
SQL Administrative (dba) account password (twice) :
Confirm Password :

Please enter a replacement for the Demonstration Database Server's
WebDAV Administrative (dav) account password (twice) :
Confirm Password :

Please wait while the passwords are changed:
done.
]]></programlisting>
</listitem>

<listitem>
<para>The file owner and group is changed at the end of the installation.  You
can choose what these shall be set to.  By default the current user is selected.</para>
<programlisting><![CDATA[
Please enter the username:group for the user and group who should own
files in this installation (default: openlink:openlink) :
Setting owners:
]]></programlisting>
</listitem>

<listitem>
<para>Finally the installer can start Virtuoso servers installed for you, but
only if a valid license key has been supplied.</para>
<programlisting><![CDATA[
The Virtuoso Installer has not offered to start a database as
no license key was found. Evaluation users should receive
one via e-mail; in case of difficulties please contact
<Technical.Support@openlinksw.com>.
]]></programlisting>
</listitem>
</orderedlist>
		</section>

<section
xml:id="unxinstvirtinstpost"><title>Post Installation</title>

<section
xml:id="unxinstvirtpost">
			<title>Post-Installation Sanity Check</title>
			<para>A quick way to check that the database is running, is to point a browser to the
			http port. The following example URLs will show the System Manager for
			the default, and the demo Virtuoso databases:</para>
			<programlisting>http://example.com
http://example.com
http://a_virtuoso_server.org:8890</programlisting>
		</section>

<section
xml:id="unxinstvirtinstposttrb"><title>Troubleshooting DB Startup Failures</title>
  <para><emphasis>Install failure</emphasis></para>
  <para>Check the .log file in:</para>
<programlisting><![CDATA[
$<Directory where Virtuoso is installed>/bin/virtuoso.log
]]></programlisting>
 <para>in order to review the installed files binaries and databases (defaults)
 for issues if install fails.</para>
   <para><emphasis>.lck existance</emphasis></para>
   <para>Check .log in case of .lck issue</para>
   <para>Delete the .lck file and repeat the steps from above.</para>
   <para><emphasis>.trx incompatiblity issue</emphasis></para>
   <para>Check .log in case of .trx incompatiblity issue</para>
    <para><emphasis>oplmgr issue</emphasis></para>
   <para>See <link linkend="oplmngrlfla">OpenLink License Management for Linux</link></para>
  </section>
  </section>

<section
xml:id="unxautovirt"><title>Starting Virtuoso Automatically on Reboot</title>

    <para>Two files, named initd_startup.template and
    initd_startup_demo.template, are placed in the top level of the
    Virtuoso installation directory.  On systems using SysVinit (most Linux
    distributions, Solaris) the appropriate one should be copied into
    /etc/init.d/ and symlinks created in the rcN.d/ directories, e.g.:</para>

<programlisting><![CDATA[
bash# cp initd_startup.template /etc/init.d/virtuoso
]]></programlisting>

    <para>Perform some sanity checks here, that the directory it uses exists, etc:</para>

<programlisting><![CDATA[
bash# vi /etc/init.d/virtuoso
]]></programlisting>

    <para>Test that it works correctly:</para>

<programlisting><![CDATA[
bash# /etc/init.d/virtuoso stop
bash# /etc/init.d/virtuoso start
]]></programlisting>

    <para>Finally, create symbolic links in the regular runlevel directories
    pointing to that script:</para>

<programlisting><![CDATA[
bash# cd /etc/rc2.d ; ln -s ../init.d/virtuoso S99virtuoso
bash# cd /etc/rc3.d ; ln -s ../init.d/virtuoso S99virtuoso
bash# cd /etc/rc5.d ; ln -s ../init.d/virtuoso S99virtuoso
]]></programlisting>

    <para>Virtuoso should now start when the service is restarted.</para>
    </section>

<section
xml:id="defpasschgunx">
			<title>Default passwords</title>
			<para>See the following Quick Start chapter for very important information about
			<link linkend="defpasschange">changing the default passwords</link>.</para>
		</section>
	</section>
	-->
    

    &virtuosoinstallunixpe;
      
    <!-- This need to be merged with http://wikis.openlinksw.com/dataspace/owiki/wiki/VirtuosoWikiWeb/VirtuosoInstallMac-->
    

    &installmacosx;
      
    &oplmgr;
      
    &installvsgrid;
      
    &installvsent;
      
    &installusado;
      
    &installwfas;
      
    &installcrweb;
      
    &installsilver;
      
    &installnetriadd;
      
    &installnetriavd;
      
    &clusterstcnf;
      
  </chapter>
