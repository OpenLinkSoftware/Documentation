<?xml version="1.0" encoding="UTF-8"?>
<refentry xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://docbook.org/ns/docbook" xml:id="fn_repl_add_snapshot_cr">
      <refmeta>
        <refentrytitle>REPL_ADD_SNAPSHOT_CR
</refentrytitle>
        <refmiscinfo>repl
</refmiscinfo>
      </refmeta>
      <refnamediv>
        <refname>REPL_ADD_SNAPSHOT_CR
</refname>
        <refpurpose>Creates conflict resolver for bi-directional replication
</refpurpose>
      </refnamediv>
      <refsynopsisdiv>
        <funcsynopsis xml:id="fsyn_repl_add_snapshot_cr">
          <funcprototype xml:id="fproto_repl_add_snapshot_cr">
            <funcdef>None 
<function>REPL_ADD_SNAPSHOT_CR
</function>

</funcdef>
            <paramdef choice="opt">in 
<parameter>tbl
</parameter>

   varchar
</paramdef>
            <paramdef choice="opt">in 
<parameter>name_suffix
</parameter>

   varchar
</paramdef>
            <paramdef choice="opt">in 
<parameter>type
</parameter>

   char
</paramdef>
            <paramdef choice="opt">in 
<parameter>order
</parameter>

   integer
</paramdef>
            <paramdef choice="opt">in 
<parameter>class
</parameter>

   varchar
</paramdef>
            <paramdef choice="opt">in 
<parameter>col
</parameter>

   varchar
</paramdef>
          </funcprototype>
        </funcsynopsis>
      </refsynopsisdiv>
      <refsect1 xml:id="desc_repl_add_snapshot_cr">
        <title>Description
</title>
        <para>Simple conflict resolvers can be generated by calling this function.
</para>
      </refsect1>
      <refsect1 xml:id="params_repl_add_snapshot_cr">
        <title>Parameters
</title>
        <refsect2>
          <title>tbl
</title>
          <para>Name of table for which conflict resolved is required.
</para>
        </refsect2>
        <refsect2>
          <title>name_suffix
</title>
          <para>Conflict resolver name suffix.
</para>
        </refsect2>
        <refsect2>
          <title>type
</title>
          <para>The resolved type, one of: ('I', 'U' OR 'D').
</para>
        </refsect2>
        <refsect2>
          <title>order
</title>
          <para>Resolver order number.
</para>
        </refsect2>
        <refsect2>
          <title>class
</title>
          <para>The kind of resolver.  Class can be one of the following:
</para>
          <simplelist type="vert">
            <member><emphasis>'max'
</emphasis>

  row with maximum value of specified column wins</member>
            <member><emphasis>'min'</emphasis>

  row with minimum value of specified column wins</member>
            <member><emphasis>'ave'</emphasis>

  new value of specified column is calculated as: 

<computeroutput>current_val = (current_val + new_val) / 2
</computeroutput>

</member>
            <member>
              <emphasis>'pub_wins'
</emphasis>
            </member>
            <member><emphasis>'custom'
</emphasis>

  publisher always wins</member>
            <member><emphasis>'sub_wins'</emphasis>

  subscriber always wins
</member>
          </simplelist>
        </refsect2>
        <refsect2>
          <title>col
</title>
          <para>This should specify the column name if 
<computeroutput>class
</computeroutput>

   is not one of 'pub_wins', 'sub_wins' or 'custom'.
</para>
        </refsect2>
      </refsect1>
      <refsect1 xml:id="ret_repl_add_snapshot_cr">
        <title>Return Types
</title>
        <para>None.
</para>
      </refsect1>
      <!--
  <refsect1
xml:id="errors_repl_add_snapshot_cr">
    <title>Errors</title>
    <para>This function can generate the following errors:</para>
    <errorcode></errorcode>
  </refsect1>
-->

      <refsect1 xml:id="examples_repl_add_snapshot_cr">
        <title>Examples
</title>
        <example xml:id="ex_repl_add_snapshot_cr">
          <title>Conflict Resolver
</title>
          <para>Suppose we have the following table:
</para>
          <screen>
create table items(
  item_id integer primary key,

  name varchar,
  price decimal
);
</screen>
          <para>A 'U' conflict resolver that averages items.price in publisher table
can be defined with the following statement:</para>
          <screen>
REPL_ADD_SNAPSHOT_CR('DB.DBA.items', 'count', 'U', 10, 'ave', 'price');

</screen>
        </example>
      </refsect1>
      <refsect1 xml:id="seealso_repl_add_snapshot_cr">
        <title>See Also
</title>
        <para>
          <link linkend="fn_repl_add_dav_cr">
            <function>REPL_ADD_DAV_CR()
</function>
          </link>
        </para>
      </refsect1>
    </refentry>
