<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="VirtSybaseEntityFrameworkUsage"}%--><p> <br></p><!--End of %META:TOPICPARENT{name="VirtSybaseEntityFrameworkUsage"}%--><h3><a name="Manually creating EDM Associations (FKs) for the Sybase pubs2 database"></a>Manually creating EDM Associations (FKs) for the Sybase pubs2 database</h3>
<p>The following steps will detail what is required to manually create <strong>Associations</strong> in your Entity Data Model.</p><p>You will need to determine where these associations exist and the multiplicity (one to one, one to many, etc) before commencing with the following steps.</p><p>NOTE: These steps will need to be repeated for each association.</p><p>1.
 The first Association I will deal with is the relationship between <strong>publishers</strong> and <strong>titles</strong> identified by the presence of the scalar property <b>pub_id</b> being present in both entities.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs01.png" style="wikiautogen"><br><br> <br>This is a one to many relationship insomuch that publishers may have zero or many titles.<br><br></p><p>2.
 To add the Association, right click on <strong>publishers</strong> entity.
 Then, click <strong>Add</strong> -&gt; <strong>Association</strong>.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs02.png" style="wikiautogen"><br><br></p><p>3.
 You will now see the <strong>Add Association</strong> dialog.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs03.png" style="wikiautogen"><br><br></p><p>4.
 For this association, the only thing that needs changing is the name of the <strong>Navigation Property</strong>.
 Change it from <strong>publishers</strong> to <strong>publisher</strong> on the <strong>publishers</strong> end of the association.<br><br>This more correctly reflects the multiplicity of the association such that a publisher is associated with zero or many titles (plural).<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs04.png" style="wikiautogen"><br><br></p><p>5.
 Hit <strong>OK</strong>.
 The diagram will be refreshed to include the newly created association.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs05.png" style="wikiautogen"><br><br></p><p>6.
 You now need to edit the mappings associated with the newly created association.
 Highlight the association on the diagram.
 Then, right click it and select <strong>Table Mapping</strong>.
 This will display the <strong>Mapping Details</strong> pane.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs06.png" style="wikiautogen"><br><br></p><p>7.
 Click that line that states &lt;Add a Table or View&gt; to reveal a drop down list of all entities.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs07.png" style="wikiautogen"><br><br></p><p>8.
 Here, you need to select the entity on the right/far side of the association (the entity where the foreign key exists).<br><br>In this example, it is the <strong>titles</strong> entity.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs08.png" style="wikiautogen"><br><br></p><p>9.
 The <strong>Mapping Details</strong> pane now refreshes to display both ends of the association.
 Now, you must provide relevant target store data types in the <strong>Column</strong> column for the key fields.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs09.png" style="wikiautogen"><br><br></p><p>10.
 Once the mapping is complete, you can now build the project using <strong>Build</strong> -&gt; <strong>Build Solution</strong>.
<br><br><br><img src="VirtSybaseAssociations/SybaseEDMFKs10.png" style="wikiautogen"><br><br></p><p>11.
 This should result in the following error which is included here, since I (the author) found it misleading.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs11.png" style="wikiautogen"><br><br> <br>It seems that this error is attempting to say that there are two mappings which map to the same target source column.<br><br>In this case, it is the target column <b>titles.pub_id</b>.<br><br>That is, the scalar property <b>pub_id</b> and the Navigation Property <strong>publishers</strong> in the Invoice entity, both map to the Sybase table column <b>titles.pub_id</b> - which is not supported.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs12.png" style="wikiautogen"><br><br></p><p>12.
 The solution is simple!<br><br>Delete the scalar property <b>titles.pub_id</b>.
 Its only purpose is to hold data representing a relationship/association (it is a Foreign Key), which has already been represented by the newly created association and resulting Navigation Property <strong>publishers</strong>.<br><br> <br>Right click on <b>titles.pub_id</b> then <strong>Delete</strong>.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs13.png" style="wikiautogen"><br><br></p><p>13.
 The model diagram will refresh to reflect this change.<br><br> <br><br><br><img src="VirtSybaseAssociations/SybaseEDMFKs14.png" style="wikiautogen"><br><br></p><p>14.
 Build the project again, using <strong>Build</strong> -&gt; <strong>Build Solution</strong>.<br><br> <br><img src="VirtSybaseAssociations/SybaseEDMFKs15.png" style="wikiautogen"><br><br></p><p>15.
 The project should now build fine.
<br><br><br><img src="VirtSybaseAssociations/SybaseEDMFKs16.png" style="wikiautogen"><br><br></p><p>You will need to repeat these steps for each association, until you have a completed Entity Data Model like this - <br><br><br><img src="VirtSybaseAssociations/SybaseEDMFKs17.png" style="wikiautogen"><br><br> <br>NOTE: It is worthwhile building after each association, since the error messages can be a little confusing.
<br></p></div></body></html>