<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="VOSRDFDataProviders"}%--><p> </p>
<!--End of %META:TOPICPARENT{name="VOSRDFDataProviders"}%--><p> <!--Begin of %VOSWARNING{}%--><div id="warning" style="display: none; color: red; background-color: #eaeaea; font-size: 120%; border: solid 1px silver; padding: 0.1em; margin-top: 1em; margin-bottom: 1em">WARNING! This URL (in the Main cluster) is no longer the authoritative source for this page; it has been moved to the VOS or ODS cluster as appropriate instead.
 See Tim Haynes in case of confusion.</div> <script type="text/javascript"> if(window.location.href.match(//Main//)) { document.getElementById('warning').style.display='block'; } else { document.getElementById('warning').style.display='none'; } </script><!--End of %VOSWARNING{}%--> <!--Begin of %VOSNAV{}%--><p> </p>
<!--End of %VOSNAV{}%--></p>
<h1><a name="Virtuoso Jena Provider"></a> Virtuoso Jena Provider</h1>
<!--Begin of %TOC{}%--><p> </p><div class="MACRO_TOC">  <div class="wikitoc">   <ul> <li><a href="#What%20is%20Jena%3F">What is Jena?</a></li> <li><a href="#What%20is%20the%20Virtuoso%20Jena%20Provider%3F">What is the Virtuoso Jena Provider?</a></li> <li><a href="#Setup">Setup</a></li>
<ul><li><a href="#Prerequisites">Prerequisites</a></li> <li><a href="#Compiling%20Jena%20Sample%20Programs">Compiling Jena Sample Programs</a></li> </ul><li><a href="#Testing">Testing</a></li><ul><li><a href="#Prerequisites">Prerequisites</a></li><ul><li><a href="#Jena%202.6">Jena 2.6</a></li> <li><a href="#Jena%202.7">Jena 2.7</a></li> <li><a href="#Jena%202.1x.x">Jena 2.1x.x</a></li> <li><a href="#Jena%203.0.x">Jena 3.0.x</a></li> </ul><li><a href="#The%20Tests">The Tests</a></li> </ul><li><a href="#Javadoc%20API%20Documentation">Javadoc API Documentation</a></li> <li><a href="#Notes">Notes</a></li><ul><li><a href="#Bypass%20Jena%2FARQ%20parser">Bypass Jena/ARQ parser</a></li> </ul><p>  </p></ul>  </div> </div>
<!--End of %TOC{}%--><h2><a name="What is Jena?"></a> What is Jena?</h2>
<p>Jena is an open source Semantic Web framework for Java.
 It provides an API to extract data from and write to RDF graphs.
The graphs are represented as an abstract &quot;model&quot;.
 A model can be sourced with data from files, databases, URIs or a combination of these.
 A Model can also be queried through SPARQL and updated through SPARUL.</p>
<h2><a name="What is the Virtuoso Jena Provider?"></a> What is the Virtuoso Jena Provider?</h2>
<p>The Virtuoso Jena RDF Data Provider is a fully operational Native Graph Model Storage Provider for the Jena Framework, which enables Semantic Web applications written using the Jena RDF Frameworks to directly query the Virtuoso RDF Quad Store.
 <a href="VOSDownload#Jena%20Provider">Providers are available</a> for the latest <a href="http://jena.sourceforge.net/" class="absuri">Jena</a> 2.6.x - 2.13.x and 3.0.x versions.
<br><br><img src="VirtJenaProvider/virt_jena_arch4.png" style="wikiautogen"><br><br></p>
<h2><a name="Setup"></a> Setup</h2>
<h3><a name="Prerequisites"></a> Prerequisites</h3>
<a href="VOSDownload#Jena%20Provider">Download the latest</a> Virtuoso Jena Provider for your Jena framework version, Virtuoso JDBC Driver, Jena Framework, and associated classes and sample programs.<ul><li><i><b>Note:</b> You must use a matching set of Jena Provider and JDBC Driver.</i> <ul><li><i>The Jena Provider for Jena 2.6 requires the Virtuoso JDBC 3 Driver.</i> </li>
<li><i>The Jena Provider for Jena 2.1x.x and 3.0.x requires the Virtuoso JDBC 4 Driver.</i> <br><br> </li>
</ul></li>
<li>The version of the Jena Provider (<code>virt_jena.jar</code>) can be verified thus: <br><pre><br>$ java -jar virt_jena3.jar
OpenLink Virtuoso(TM) Provider for Jena(TM) Version 3.0.0 [Build 1.25]

$ java -jar ./virt_jena2.jar
OpenLink Virtuoso(TM) Provider for Jena(TM) Version 2.10.1 [Build 1.10]

$ java -jar ./virt_jena.jar
OpenLink Virtuoso(TM) Provider for Jena(TM) Version 2.6.2 [Build 1.10]
</pre><br></li>
<li>Files contained in the zip files are generally older than specifically linked downloads (e.g., the Virtuoso JDBC Driver, <code>virtjdbc3.jar</code>), so don&#39;t replace if prompted during extraction.
 Instead, rename the file extracted from the zip, and compare their versions to be sure you keep only the most recent.
<br><pre><br>$ java -cp ./virtjdbc3.jar virtuoso.jdbc3.Driver
OpenLink Virtuoso(TM) Driver for JDBC(TM) Version 3.x [Build 3.62]

$ java -cp ./virtjdbc3.fromzip.jar virtuoso.jdbc3.Driver
OpenLink Virtuoso(TM) Driver for JDBC(TM) Version 3.x [Build 3.11]
</pre><br> </li>
</ul><h3><a name="Compiling Jena Sample Programs"></a> Compiling Jena Sample Programs</h3>
<ol><li>Edit the sample programs <code>VirtuosoSPARQLExample<i>X</i>.java</code>, where <code><i>X</i> = {1,2,3,4,5,6,7,8,9,13,14}</code>.
 Set the JDBC connection strings therein to point to a valid Virtuoso Server instance, using the form: <br><pre><br>&quot;jdbc:virtuoso://&lt;virtuoso-hostname-or-IP-address&gt;[:&lt;data port&gt;]/charset=UTF-8/log_enable=2&quot;, &quot;&lt;username&gt;&quot;, &quot;&lt;password&gt;&quot;   
</pre><br>For example, <br><pre><br>&quot;jdbc:virtuoso://localhost:1111/charset=UTF-8/log_enable=2&quot;, &quot;dba&quot;, &quot;dba&quot;   
</pre><br><ul><li>Use <b><code>charset=UTF-8</code></b> to ensure compatibility with non-Western codepages or character sets such as Cyrillic </li>
<li>Use <b><code>log_enable=2</code></b> to turn on row-level autocommit, important when processing large RDF data sets </li>
</ul></li>
<li>Ensure your active <code>CLASSPATH</code> includes full paths to all of the following files <ul><li>Required Jena jar file for the version being used, as indicated in the <code>Testing</code> section next </li>
<li><code>virt_jenaX.jar</code> - Virtuoso Jena Provider for the required version </li>
<li><code>virtjdbcX.jar</code> - Virtuoso JDBC Driver for the required version </li>
</ul></li>
<li>Compile the Jena Sample applications using the following command: <br><pre><br>javac VirtuosoSPARQLExample*.java
</pre><br> </li>
</ol><h2><a name="Testing"></a> Testing</h2>
<p>Once the Provider classes and sample program have been successfully compiled, the Provider can be tested using the included sample programs.</p>
<h3><a name="Prerequisites"></a> Prerequisites</h3>
<p>Ensure your active <code>CLASSPATH</code> includes the full path to the directory containing the compiled <code>VirtuosoSPARQLExample<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtuosoSPARQLExample&parent=VirtJenaProvider" class="wikiword">?</a>*.class</code> files, as well as to each of the following files depending on Jena version in use --</p>
<h4><a name="Jena 2.6"></a> Jena 2.6</h4>
<ul><li><code>icu4j_3_4.jar</code> </li>
<li><code>iri.jar</code> </li>
<li><code>xercesImpl.jar</code> </li>
<li><code>axis.jar</code> </li>
<li><code>commons-logging-1.1.1.jar</code> </li>
<li><code>jena.jar</code> </li>
<li><code>arq.jar</code> </li>
<li><code>virtjdbc3.jar</code> </li>
<li><code>virt_jena.jar</code></li>
</ul><h4><a name="Jena 2.7"></a> Jena 2.7</h4>
<ul><li><code>jena-arq-2.9.4.jar</code> </li>
<li><code>jena-iri-0.9.4.jar</code> </li>
<li><code>jena-core-2.7.4.jar</code> </li>
<li><code>jcl-over-slf4j-1.6.4.jar</code> </li>
<li><code>log4j-1.2.16.jarslf4j-api-1.6.4.jar</code> </li>
<li><code>slf4j-log4j12-1.6.4.jar</code> </li>
<li><code>xercesImpl-2.10.0.jar</code> </li>
<li><code>xml-apis-1.4.01.jar</code> </li>
<li><code>commons-lang3-3.4.jar</code> </li>
<li><code>virtjdbc4.jar</code> </li>
<li><code>virt_jena2.jar</code></li>
</ul><h4><a name="Jena 2.1x.x"></a> Jena 2.1x.x</h4>
<ul><li><code>junit-4.5.jar</code> </li>
<li><code>jena-arq-2.10.1.jar</code> </li>
<li><code>jena-iri-0.9.6.jar</code> </li>
<li><code>jena-core-2.10.1.jar</code> </li>
<li><code>jena-core-2.10.1-tests.jar</code> </li>
<li><code>jcl-over-slf4j-1.6.4.jar</code> </li>
<li><code>log4j-1.2.16.jar</code> </li>
<li><code>slf4j-api-1.6.4.jar</code> </li>
<li><code>slf4j-log4j12-1.6.4.jar</code> </li>
<li><code>xercesImpl-2.11.0.jar</code> </li>
<li><code>xml-apis-1.4.01.jar</code> </li>
<li><code>virtjdbc4.jar</code> </li>
<li><code>virt_jena2.jar</code></li>
</ul><h4><a name="Jena 3.0.x"></a> Jena 3.0.x</h4>
<ul><li><code>junit-4.5.jar</code> </li>
<li><code>commons-lang3-3.3.2.jar</code> </li>
<li><code>jena-arq-3.0.0.jar</code> </li>
<li><code>jena-iri-3.0.0.jar</code> </li>
<li><code>jena-base-3.0.0.jar</code> </li>
<li><code>jena-core-3.0.0.jar</code> </li>
<li><code>jena-core-3.0.0-tests.jar</code> </li>
<li><code>jcl-over-slf4j-1.7.12.jar</code> </li>
<li><code>log4j-1.2.17.jar</code> </li>
<li><code>slf4j-api-1.7.12.jar</code> </li>
<li><code>slf4j-log4j12-1.7.12.jar</code> </li>
<li><code>xercesImpl-2.11.0.jar</code> </li>
<li><code>xml-apis-1.4.01.jar</code> </li>
<li><code>jena-shaded-guava-3.0.0.jar</code> </li>
<li><code>virtjdbc4.jar</code> </li>
<li><code>virt_jena3.jar</code></li>
</ul><p>If you&#39;ve extracted the zips into the same directory where you compiled the example files, a command like this should do the job -- </p>
<br><pre>export CLASSPATH=`pwd`:`pwd`/*.jar:$CLASSPATH
</pre><p> </p>
<h3><a name="The Tests"></a> The Tests</h3>
<ol><li>Example 1<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample1&parent=VirtJenaProvider" class="wikiword">?</a> returns the contents of the RDF Quad store of the targeted Virtuoso instance, with the following command: <br><pre><br>java VirtuosoSPARQLExample1
</pre><br></li>
<li>Example 2<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample2&parent=VirtJenaProvider" class="wikiword">?</a> reads in the contents of the following FOAF URIs -- <br><pre><br>http://kidehen.idehen.net/dataspace/person/kidehen#this
http://www.w3.org/People/Berners-Lee/card#i
http://demo.openlinksw.com/dataspace/person/demo#this
</pre><br>-- and returns the RDF data stored, with the following command: <br><pre><br>java VirtuosoSPARQLExample2
</pre><br></li>
<li>Example 3<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample3&parent=VirtJenaProvider" class="wikiword">?</a> performs simple addition and deletion operation on the content of the triple store, with the following command: <br><pre><br>java VirtuosoSPARQLExample3
</pre><br></li>
<li>Example 4<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample4&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates the use of the <code>graph.contains</code> method for searching triples, with the following command: <br><pre><br>java VirtuosoSPARQLExample4
</pre><br></li>
<li>Example 5<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample5&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates the use of the <code>graph.find</code> method for searching triples, with the following command: <br><pre><br>java VirtuosoSPARQLExample5
</pre><br></li>
<li>Example 6<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample6&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates the use of the <code>graph.getTransactionHandler</code> method, with the following command: <br><pre><br>java VirtuosoSPARQLExample6
</pre><br></li>
<li>Example 7<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample7&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates the use of the <code>graph.getBulkUpdateHandler</code> method, with the following command: <br><pre><br>java VirtuosoSPARQLExample7
</pre><br></li>
<li>Example 8<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample8&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates how to insert triples into a graph, with the following command: <br><pre><br>java VirtuosoSPARQLExample8
</pre><br></li>
<li>Example 9<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample9&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates the use of the <code>CONSTRUCT</code>, <code>DESCRIBE</code>, and <code>ASK</code> SPARQL query forms, with the following command: <br><pre><br>java VirtuosoSPARQLExample9
</pre><br></li>
<li>Example 13<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample13&parent=VirtJenaProvider" class="wikiword">?</a> demonstrates the use of inference rules with the following command: <br><pre><br>java VirtuosoSPARQLExample13
</pre><br></li>
<li><a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/VirtJenaSPARQLExample14" class="wikiword">Example 14</a> demonstrates the use of the Jena in memory Inference and Ontology Model rules with the following command: <br><pre><br>java VirtuosoSPARQLExample14
</pre><br> </li>
</ol><h2><a name="Javadoc API Documentation"></a> Javadoc API Documentation</h2>
<p>Javadocs covers the complete set of classes, interfaces, and methods implemented by the provider:</p>
<ul><li><a href="http://docs.openlinksw.com/jena/" class="absuri">Javadoc API Documentation for the Jena 2.6 Provider</a> </li>
<li><a href="http://docs.openlinksw.com/jena2/" class="absuri">Javadoc API Documentation for the Jena 2.10+ Provider</a></li>
</ul><h2><a name="Notes"></a> Notes</h2>
<h3><a name="Bypass Jena/ARQ parser"></a> Bypass Jena/ARQ parser</h3>
<p>To use Virtuoso-specific SPARQL extensions (such as <code>bif:contains</code>), queries must bypass the Jena/ARQ parser and go straight to the Virtuoso server.
 This is done by using the <code>VirtuosoQueryExecutionFactory.create()</code> method, instead of and without the Jena-specific <code>QueryFactory.create()</code> method, which always invokes the Jena/ARQ parser, which in turn rejects any Virtuoso-specific extensions.
 Thus one would execute a query as follows to bypass the Jena parser -- </p>
<br><pre>VirtuosoQueryExecution vqe = VirtuosoQueryExecutionFactory.create (query, set);
vqe.execSelect();
</pre><p>-- rather than -- </p>
<br><pre>Query sparql = QueryFactory.create(query);
VirtuosoQueryExecution vqe = VirtuosoQueryExecutionFactory.create (sparql, set);
vqe.execSelect();
</pre><p> <a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/CategoryRDF" class="wikiword">CategoryRDF</a> <a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/CategoryOpenSource" class="wikiword">CategoryOpenSource</a> <a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/CategoryVirtuoso" class="wikiword">CategoryVirtuoso</a> <a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/CategoryVOS" class="wikiword">CategoryVOS</a> CategoryJena<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/CategoryJena&parent=VirtJenaProvider" class="wikiword">?</a> <a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/CategoryDocumentation" class="wikiword">CategoryDocumentation</a></p>
<!--Begin of %VOSCOPY{}%--><p> </p>
<!--End of %VOSCOPY{}%--><p> </p>
</div></body></html>