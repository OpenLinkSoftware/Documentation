<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="VirtSponger"}%--><p> </p>
<!--End of %META:TOPICPARENT{name="VirtSponger"}%--><h1><a name="Enhancements the Virtuoso Sponger brings to SPARQL"></a> Enhancements the Virtuoso Sponger brings to SPARQL</h1>
<p> <!--Begin of %TOC{}%--><p> </p><div class="MACRO_TOC">  <div class="wikitoc">   <ul> <li><a href="#Why%3F">Why?</a></li> <li><a href="#What%3F">What?</a></li> <li><a href="#How%3F">How?</a></li>
<ul><li><a href="#Basics">Basics</a></li> <li><a href="#Details">Details</a></li><ul><li><a href="#INPUT%20Pragmas">INPUT Pragmas</a></li> <li><a href="#GET%20Pragmas">GET Pragmas</a></li> <li><a href="#SQL%20Pragmas">SQL Pragmas</a></li> <li><a href="#OUTPUT%20Pragmas">OUTPUT Pragmas</a></li> </ul><li><a href="#Sponger%20Usage%20Examples">Sponger Usage Examples</a></li> </ul><li><a href="#Related">Related</a></li><p>  </p></ul>  </div> </div>
<!--End of %TOC{}%--></p>
<h2><a name="Why?"></a>Why?</h2>
 In the world of Linked Data, the Web is treated as a global data space where every data object has an identifier (URI) that serves as a key to its entity-attribute-value (3-tuple or triples)-based description.
 To make these &quot;keys&quot; work, data object URIs have to be dereferenceable — i.e., they must resolve to actual object content through functionality commonly delivered via data object locator and retriever URI specializations (or subtypes) such as URLs.<h2><a name="What?"></a>What?</h2>
 Virtuoso&#39;s Sponger is a sophisticated piece of middleware that provides full Linked Data fidelity for pre-existing data objects or resources.
 This Linked Data is then accessible via HTTP-based Web Services, and SPARQL is enhanced with Sponger pragmas (or directives) and some optional additions to the <code>FROM</code> clause.<h2><a name="How?"></a>How?</h2>
<h3><a name="Basics"></a> Basics</h3>
<p>Sponger pragmas control various aspects of functionality —</p>
<ol><li><b>Identifier Dereference:</b> handled by <code>INPUT</code> pragmas.
</li>
<li><b>Actual Data Retrieval:</b> handled by <code>GET</code> pragmas.
</li>
<li><b>SQL Code Generation:</b> handled by <code>SQL</code> pragmas.
</li>
<li><b>Output Format Adjustments:</b> handled by <code>OUTPUT</code> pragmas.</li>
</ol><p>Pragmas are qualified at usage time using the following pattern: </p>
<br><pre>&lt;pragma-type&gt;:&lt;actual-method&gt; [&quot;&lt;method-modifier&gt;&quot;]
</pre><h3><a name="Details"></a> Details</h3>
<h4><a name="INPUT Pragmas"></a> INPUT Pragmas</h4>
<code>INPUT</code> Pragmas enable you control dereference behavior applied to a SPARQL query.
 Net effect, fine-grained control over how variables and explicit data object identifiers are dereferenced en route to creating base data from which SPARQL query solutions are derived.<p>Methods and method-modifiers associated with this pragma type include:</p>

<table class="wikitable"><tr><th id="0"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=0&col=1">Method </a></th><th id="1"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=1&col=2">Modifier(s) </a></th><th id="2"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=2&col=3">Description </a></th><th id="3"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=3&col=4">Usage Example </a></th></tr><tr><td> <b><code>input:default-graph-exclude</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Works like &quot;<code>NOT FROM</code>&quot; clause  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx26" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:default-graph-uri</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Works like &quot;<code>FROM</code>&quot; clause  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx24" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:freeze</code></b>  </td><td align="center">  </td><td> Blocks further changes in the list of source graphs. The web service endpoint (or similar non-web application) can edit an incoming query by placing a list of pragmas ending with <code>input:freeze</code> in front of the query text. If an intruder tries to place some graph names, they will get a compilation error, not access to the data. <code>input:freeze</code> disables all <code>input:grab-...</code> pragmas as well.  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx28&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr><tr><td> <b><code>input:grab-all</code></b> </td><td align="center">  <b><code>&quot;yes&quot;</code></b>  </td><td> Instructs the SPARQL processor to dereference everything related to the query. All variables and literal IRIs in the query become values for <code>input:grab-var</code> and <code>input:grab-iri</code>. The resulting performance may be very bad. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx2" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:grab-base</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Specifies the base IRI to use when converting relative IRIs to absolute. (Default: empty string.)  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx3" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:grab-depth</code></b>  </td><td align="center">  <b><code>&quot;0&quot;</code></b>  </td><td> Sets the maximum &#39;degrees of separation&#39; or links (predicates) between nodes in the target graph.  Acceptable range is non-negative integers.  <code>0</code> means unlimited.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx4" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:grab-destination</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Overrides the default IRI dereferencing and Local Graph IRI designation. Retrieved content (triples) is stored in a graph IRI designated by the modifier value.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx5" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:grab-follow-predicate</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Specifies a predicate IRI to be used when traversing a graph. (This pragma may be included multiple times). Synonym of <code>input:grab-seealso</code>. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx6" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:grab-iri</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Specifies an IRI that should be retrieved before executing the rest of the query, if it is not in the quad store already. (This pragma can be included multiple times).  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx7" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:grab-limit</code></b>  </td><td align="center">  <b><code>&quot;&lt;number&gt;&quot;</code></b>  </td><td> Sets the maximum number of resources (triple subject or object IRIs) to be de-referenced. Acceptable range is non-negative integers. <code>0</code> means unlimited.   </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx8" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:grab-loader</code></b>  </td><td align="center">  <b><code>&quot;&lt;procedure-name&gt;&quot;</code></b>  </td><td> Identifies the procedure used to retrieve, parse, and store content. (Default: <code>DB.DBA.RDF_SPONGE_UP</code>)  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx9&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a>  </td></tr><tr><td> <b><code>input:grab-resolver</code></b>  </td><td align="center">  <b><code>&quot;&lt;procedure-name&gt;&quot;</code></b>  </td><td> Identifies the procedure that handles IRI dereference and actual content retrieval via a specific data access protocol (e.g., HTTP). (Default: <code>DB.DBA.RDF_GRAB_RESOLVER_DEFAULT<code>.)  </code></code></td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx10&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr><tr><td> <b><code>input:grab-seealso</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Synonym of <code>input:grab-follow-predicate</code>.  </td><td><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx11" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:grab-var</code></b>  </td><td align="center">  <b><code>&quot;?&lt;var-name&gt;&quot;</code></b>  </td><td> Specifies the name of the SPARQL variable whose values should be used as IRIs of resources that should be downloaded.   </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx1" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:grab-group-destination</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Resembles <code>input:grab-destination</code> but sponges will create individual graphs for Network Resource Fetch results, and in addition to this common routine, a copy of each Network Resource Fetch result will be added to the resource specified by the value of <code>input:grab-group-destination</code>. <code>input:grab-destination</code> redirects loadings; <code>input:grab-group-destination</code> duplicates them.   </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx17&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr><tr><td> <b><code>input:grab-intermediate</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Extends the set of IRIs to sponge, useful in combination with <code>input:grab-seealso</code>. If present, then, for a given subject, Network Resource Fetch will retrieve not only values of see-also predicates for that subject, but also the subject itself. The define value is not used in current implementation.  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx18&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr><tr><td> <b><code>input:ifp</code></b> </td><td align="center">  <b><code>&quot;&lt;keyword&gt;&quot;</code></b>  </td><td> Adds <code>IFP</code> keyword in <code>OPTION (QUIETCAST, ...)</code> clause in the generated SQL. The value of this define is not used yet; an empty string is safe for future extensions. </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx21&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a>  </td></tr><tr><td> <b><code>input:inference</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Specifies the name of an inference rule to provide context for backward-chained reasoner. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx22" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:named-graph-exclude</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Works like &quot;<code>NOT FROM NAMED</code>&quot; clause  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx27" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:named-graph-uri</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Works like &quot;<code>FROM NAMED</code>&quot; clause </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx25" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:param</code></b>  </td><td align="center">  <b><code>&quot;&lt;variable-name&gt;&quot;</code></b>  </td><td> <p>Declares a variable name to be used as a custom SPARQL protocol parameter.</p> <p>SPARQL query leverages this custom parameter using the special &quot;<code>?::{variable}</code>&quot; sytnax (excluding quotation marks).</p> <p>If query text is generated  by a query builder that does not understand Virtuoso&#39;s SPARQL-BI extensions, then the generated query text may contain a conventional query variable as long as it uses the <code>define input:param &quot;X&quot;</code> pragma in its preamble.</p> <p><i><b>Note:</b> This will not work for positional parameters; i.e., you cannot replace a SPARQL-BI reference like <code>?::3</code> with <code>?3</code> combined with a <code>define input:param &quot;3&quot;</code> pragma.</i></p>  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx23&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a>  </td></tr><tr><td> <b><code>input:params</code></b>  </td><td align="center">  <b><code>&quot;&lt;variable-name&gt;&quot;</code></b>  </td><td> Synonym of <code>input:param</code>  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx23&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a>  </td></tr><tr><td> <b><code>input:same-as</code></b> </td><td align="center">  <b><code>&quot;yes&quot;</code></b>  </td><td> Sets inference context for <code>owl:sameAs</code> (entity equivalence by name) reasoning and union expansion.    </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx19" class="wikiword">Example</a>  </td></tr><tr><td> <b><code>input:storage</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Sets dataset (quads) storage scope. The value is a storage identifier (IRI) where the default value is <code>virtrdf:DefaultQuadStorage</code>. If the value is an empty string, then only quads associated with Linked Data Views are used. This is a good choice for low-level admin procedures, for two reasons: they will not interfere with any changes in <code>virtrdf:DefaultQuadStorage</code>; and they will continue to work even if all compiler&#39;s metadata is corrupted, including the description of <code>virtrdf:DefaultQuadStorage</code>. (<code>define input:storage &quot;&quot;</code> switches the SPARQL compiler to a small set of metadata that is built in &#39;C&#39; code and thus are very hard for end-users to corrupt.) </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx20" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:target-fallback-graph-uri</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> This pragma tells the compiler to use <code>&lt;XXX&gt;</code> as target for SPARQL 1.1 <code>INSERT</code> and <code>DELETE</code> operations if no other graph is specified in the query. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx_29" class="wikiword">Example</a> </td></tr><tr><td> <b><code>input:with-fallback-graph-uri</code></b> </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> This pragma tells the compiler to use <code>&lt;XXX&gt;</code> as target both for SPARQL 1.1  operations if no other graph is specified and for default graph IRI if no other source graphs are named in the query. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx_30" class="wikiword">Example</a> </td></tr></table>
<p> </p>
<h4><a name="GET Pragmas"></a> GET Pragmas</h4>
<code>GET</code> Pragmas enables you to control actual data-object content-retrieval behavior applied to a SPARQL query.
 The net effect is fine-grained control over data-access-oriented matters such as —<ul><li>Data object content format, via content negotiation </li>
<li>Cache invalidation </li>
<li>Proxy handling</li>
</ul><p>This pragma type is also usable as a comma-separated list of <code>SPARQL ...
 FROM &lt;options&gt;</code>.
 Its methods and method-modifiers include —</p>

<table class="wikitable">
<tr><th id="4"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=4&col=1">Method </a></th><th id="5"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=5&col=2">Modifier(s) </a></th><th id="6"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=6&col=3">Description </a></th><th id="7"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=7&col=4">Usage Example </a></th></tr>
<tr><td> <b><code>get:accept</code></b>  </td><td align="center">  <b><code>&quot;application/xml&quot;</code></b>  <br>   <b><code>&quot;application/rdf+xml&quot;</code></b>  <br>  <b><code>&quot;application/rdf+turtle&quot;</code></b>  <br>  <b><code>&quot;application/x-turtle&quot;</code></b>  <br>  <b><code>&quot;application/turtle&quot;</code></b>  <br>  <b><code>&quot;text/rdf+n3&quot;</code></b>  <br>  <b><code>&quot;text/turtle&quot;</code></b>  </td><td> <code>get:accept</code> is most commonly used to access a web service that returns HTML by default but can also return RDF if forced to do so. The default value is  <br> <code>&quot;application/rdf+xml; q=1.0, text/rdf+n3; q=0.9,  <br> application/rdf+turtle; q=0.5, application/x-turtle; q=0.6,  <br> application/turtle; q=0.5, text/turtle; q=1.0,  <br> application/xml; q=0.2, */*; q=0.1&quot;</code>  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx47" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>get:cartridge</code></b>  </td><td align="center">  <b><code>&quot;extractor&quot;</code></b>  <br>  <b><code>&quot;meta&quot;</code></b>   </td><td> Designates the use of Sponger ?meta? or ?extractor? cartridges in the query being executed. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx29" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>get:method</code></b>  </td><td align="center">  <b><code>&quot;GET&quot;</code></b>  <br>  <b><code>&quot;MGET&quot;</code></b>  </td><td> <ul><li><code>&quot;GET&quot;</code> loads the resource itself.</li> <li><code>&quot;MGET&quot;</code> loads metadata about the resource.</li></ul>  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx16" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>get:private</code></b>  </td><td align="center">  <b><code>&quot;&quot;</code></b>  <br>  <b><code>&lt;graph_group_IRI&gt;</code></b>  </td><td> When used for sponging graph <code>X</code>, it adjusts graph-level security of graph <code>X</code> (and of <code>graph_group_IRI</code>, if specified) so that <code>X</code> becomes a privately accessible graph of the user who sponges the <code>X</code>. If <code>graph_group_IRI</code> is specified, <code>X</code> becomes accessible to users that can access <code>graph_group_IRI</code> with the same permissions they have on <code>graph_group_IRI</code>. <br><br> The exact rules are — <br><ul><li> If graph is <code>virtrdf:</code>, an error is signaled.</li> <li>If graph name is an IRI of handshaked web service endpoint or &quot;public IRI&quot; of a handshaked web service endpoint, an error is signaled.</li> <li>If access is public by default, even for private graphs, an error is signaled and sponging is not tried.</li> <li>If default is &quot;no access&quot; but someone (other than current user) has specifically granted read access to the graph in question AND current user is not <code>dba</code> AND current user has no bit 32 permission on this graph, an error is signaled.</li> <li>If read access is public by default for world and disabled for private graphs, then the graph to be sponged is added to the group of private graphs.</li> <li>If current user is not <code>DBA</code>, current user is granted <code>read+write+sponge+admin</code> access to the graph to be sponged. In addition, current user gets special permission bit 32, indicating that the graph is made by private sponge of this specific user.</li> <li>If the value of <code>get:private</code> is an IRI, then — <ul><li>the IRI is supposed to be an IRI of &quot;plain&quot; graph group.  An error is signaled in case of non-existing graph group, group of private graphs, or group of graphs to be replicated.</li> <li>the graph is added to that group.</li><li>each non-<code>dba</code> user that can get list of files of the group will get permissions for the loaded graph equal to permissions they have on graph group minus &quot;list&quot; permission.</li></ul></li></ul> </td><td> <ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx45" class="wikiword">Example for entirely confidential database</a> </li> <li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx46" class="wikiword">Example using private graphs</a></li></ul>  </td></tr>
<tr><td> <b><code>get:proxy</code></b>  </td><td align="center">  <b><code>&quot;&lt;host[:port]&gt;&quot;</code></b>  </td><td> Similar to setting up a Web browser to work with a proxy-style HTTP server, this identifies the CNAME (URL <code>host:port</code> or <code>authority</code> component) to target if direct retrieval from the URL in the <code>FROM</code> clause or handling of a data object&#39;s dereferenceable identifier is not possible. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx12" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>get:refresh</code></b>  </td><td align="center">  <b><code>&quot;&lt;seconds&gt;&quot;</code></b>  </td><td> Limits the lifetime of a local cached copy of the source. The value is in seconds.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx15" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>get:query</code></b>  </td><td align="center">    </td><td align="center">  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx34&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr>
<tr><td> <b><code>get:soft</code></b>  </td><td align="center">  <b><code>&quot;soft&quot;</code></b>  <br>  <b><code>&quot;replace&quot;</code></b>  <br>  <b><code>&quot;add&quot;</code></b>  </td><td> <ul><li>&quot;<code>soft</code>&quot; applies cache-invalidation to the sponged resource en route to replacing content or doing nothing.</li> <li>&quot;<code>replace</code>&quot; replaces triples stored in named graphs.</li> <li>&quot;<code>add</code>&quot; simply adds triples to existing named graphs.</li></ul> </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx13" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>get:uri</code></b>  </td><td align="center">  <b><code>&quot;&lt;IRI&gt;&quot;</code></b>  </td><td> Identifies a specific URI to be de-referenced, distinct from the document URL in the <code>FROM</code> clause of a SPARQL query. Typically, this would be used to deference a specific subject or object of a relation in the data retrieved in by the document URL in the <code>FROM</code> clause.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx14" class="wikiword">Example</a>  </td></tr>
</table>
<p> </p>
<h4><a name="SQL Pragmas"></a> SQL Pragmas</h4>
<p>Pragmas to control code generation:</p>

<table class="wikitable">
<tr><th id="8"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=8&col=1">Method </a></th><th id="9"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=9&col=2">Modifier(s) </a></th><th id="10"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=10&col=3">Description </a></th><th id="11"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=11&col=4">Usage Example </a></th></tr>
<tr><td> <b><code>sql:assert-user</code></b>  </td><td align="center">  <b><code>&quot;&lt;username&gt;&quot;</code></b>  </td><td> Defines the user who is supposed to be the single &quot;proper&quot; use for the query. If the compiler is launched by any other user, an error is signaled. The typical use is <code>define sql:assist-user &quot;dba&quot;</code>. This is too weak to be a security measure, but may help in debugging of security issues. </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx38&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr>
<tr><td> <b><code>sql:big-data-const</code></b>  </td><td align="center">  </td><td align="center">  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx31" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>sql:describe-mode</code></b>  </td><td align="center">  <b><code>&quot;&quot;</code></b>  <br>  <b><code>&quot;SPO&quot;</code></b>  <br>  <b><code>&quot;CBD&quot;</code></b>  <br>  <b><code>&quot;OBJCBD&quot;</code></b>  <br>  <b><code>&quot;&lt;custom&gt;&quot;</code></b>  </td><td> See detailed description <a href="http://docs.openlinksw.com/virtuoso/rdfsqlfromsparqldescribe/" class="absuri">here</a>. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx32" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>sql:globals-mode</code></b>  </td><td align="center">  <code>&quot;XSLT&quot;</code>  <br>  <code>&quot;SQL&quot;</code>  </td><td> Tells how to print names of global variables. Supported values are <ul><li><code>&quot;XSLT&quot;</code> — print colon before name of global variable</li> <li><code>&quot;SQL&quot;</code> — print as usual</li></ul>  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx35" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>sql:gs-app-callback</code></b>  </td><td align="center">   </td><td> Application-specific callback, returns permission bits of a given graph.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx39" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>sql:gs-app-uid</code></b>  </td><td align="center">  </td><td> Application-specific user-id to use in callback. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx40" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>sql:log-enable</code></b>  </td><td align="center">   </td><td> Value that will be passed to SPARUL procedures, where it will be passed to <a href="http://docs.openlinksw.com/virtuoso/fn_log_enable.html" class="absuri">log_enable()</a> BIF. <code>define sql:log-enable N</code> will result in <code>log_enable(N, 1)</code> at the beginning of the operation; another <a href="http://docs.openlinksw.com/virtuoso/fn_log_enable.html" class="absuri">log_enable()</a> call will restore previous mode of transaction log at exit from the procedure including any error signaled from it. For example, set to <code>2</code> to disable logging to avoid a huge transaction after-image when sponging is deep and wide. </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx33" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>sql:param</code></b>  </td><td align="center">  <b><code>&quot;&lt;variable-name&gt;&quot;</code></b>  </td><td> Synonym of <code>input:param</code>  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx23&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a>  </td></tr>
<tr><td> <b><code>sql:params</code></b>  </td><td align="center">  <b><code>&quot;&lt;variable-name&gt;&quot;</code></b>  </td><td> Synonym of <code>input:param</code>  </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx23&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a>  </td></tr>
<tr><td> <b><code>sql:select-option</code></b>  </td><td align="center">   </td><td> Value will be added as a global <code>OPTION()</code> clause of the generated SQL <code>SELECT</code>. This clause is always printed; it is always at least <code>OPTION (QUIETCAST, ...)</code>. The most popular use case is <code>define sql:table-option &quot;ORDER&quot;</code> to tell the SQL compiler to execute <code>JOINs</code> in the order of their use in the query; this can make query compilation much faster, but the compilation result can be terrible if you do not know precisely what you&#39;re doing and do not inspect the execution plan of the generated SQL query.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx37" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>sql:signal-void-variables</code></b>  </td><td align="center">   </td><td> When set to <code>0</code>, this forces the SPARQL compiler to signal errors if some variables cannot be bound due to, for instance, misspelled names or attempts to make joins across disjoint domains. These diagnostics are especially important when the query is long. It is the most useful debugging variable if Linked Data Views are in use. It tells the SPARQL compiler to signal an error if it can prove that some variable can never be bound. Usually it means an error in the query, like a typo in IRI or a totally wrong triple pattern.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx30" class="wikiword">Example</a>  </td></tr>
<tr><td> <b><code>sql:table-option</code></b>  </td><td align="center">   </td><td> Value will be added as an option to each triple in the query, and later it will be printed in <code>TABLE OPTION (...)</code> clause of source table clause. This works only for SQL code for plain triples from <code>RDF_QUAD</code>; fragments of queries related to RDF Views will remain unchanged.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx36" class="wikiword">Example</a> </td></tr>
</table>
<h4><a name="OUTPUT Pragmas"></a> OUTPUT Pragmas</h4>
<p>Pragmas to control the type of the result.</p>

<table class="wikitable">
<tr><th id="12"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=12&col=1">Method </a></th><th id="13"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=13&col=2">Modifier(s) </a></th><th id="14"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=14&col=3">Description </a></th><th id="15"><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL?sort=15&col=4">Usage Example </a></th></tr>
<tr><td> <b><code>output:dict-format</code></b>  </td><td align="center">  <code>&quot;&lt;format-specifier&gt;&quot;</code>  </td><td> Tells the compiler that the query should produce a string output with the serialization of the result, not a result set. Only <code>CONSTRUCT</code> and <code>DESCRIBE</code> queries are affected by the value of <code>output:dict-format</code>. Use <code>output:scalar-format</code> and/or <code>output:format</code> for <code>ASK</code> queries. </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx44&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr>
<tr><td> <b><code>output:format</code></b>  </td><td align="center">  <code>&quot;&lt;format-specifier&gt;&quot;</code>  </td><td> Tells the compiler that the query should produce a string output with the serialization of the result, not a result set. The value of <code>output:format</code> is primarily used for <code>SELECT</code> and data manipulation queries. It will also be used for <code>CONSTRUCT</code>, <code>DESCRIBE</code>, and <code>ASK</code> queries, if  <code>output:dict-format</code> or <code>output:scalar-format</code> are not used.  </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx42" class="wikiword">Example</a> </td></tr>
<tr><td> <b><code>output:scalar-format</code></b>  </td><td align="center">  <code>&quot;&lt;format-specifier&gt;&quot;</code>  </td><td> Tells the compiler that the query should produce a string output with the serialization of the result, not a result set. Only <code>ASK</code> queries are affected by the value of <code>output:scalar-format</code>.  Use <code>output:dict-format</code> and/or <code>output:format</code> for <code>CONSTRUCT</code> or <code>DESCRIBE</code> queries. </td><td> Example<a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx43&parent=VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">?</a> </td></tr>
<tr><td> <b><code>output:valmode</code></b>  </td><td align="center">  <code>&quot;SQLVAL&quot;</code>  <br>  <code>&quot;LONG&quot;</code>  <br>  <code>&quot;AUTO&quot;</code>  </td><td> Tells the compiler which SQL datatypes should be used for output values. <ul><li><code>&quot;SQLVAL&quot;</code>, the default, is appropriate for ODBC clients and the like which know nothing about RDF and expect plain SQL values.</li> <li><code>&quot;LONG&quot;</code> tells the compiler to preserve RDF boxes as is and to return IRI IDs instead of IRI string value. This is good for when a Virtuoso/PL procedure is RDF-aware and keeps results to be passed on to other SPARQL queries or some low-level RDF routines.</li> <li><code>&quot;AUTO&quot;</code>, is for dirty hackers that do not want any conversion of any sort at the output to read the SQL output of SPARQL front-end, who will find the format of each column and add the needed conversions later.</li></ul> </td><td> <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQLEx41" class="wikiword">Example</a> </td></tr>
</table>
<h3><a name="Sponger Usage Examples"></a> Sponger Usage Examples</h3>
<ul><li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongerusageprocessorex" class="absuri">SPARQL Processor Usage Example</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongerusageproxyex2" class="absuri">RDF Proxy Service Example</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtDeployingLinkedDataGuide_BrowsingNorthwindRdfView#AncMozToc2" class="absuri">Browsing &amp; Exploring RDF View Example Using ODE</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtDeployingLinkedDataGuide_BrowsingNorthwindRdfView#AncMozToc3" class="absuri">Browsing &amp; Exploring RDF View Example Using iSPARQL</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/rdfinsertmethods.html#rdfinsertmethodplapissimpleexample" class="absuri">Basic Sponger Cartridge Example</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongerusagebriefex" class="absuri">HTTP Example for Extracting Metadata using CURL</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongercartridgetypesmetarestexamples" class="absuri">RESTFul Interaction Examples</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/sect5_virtuosospongercreatecustcartrrgstflickr.html" class="absuri">Flickr Cartridge Example</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongercreatecustcartrexmp" class="absuri">MusicBrainz Metadatabase Example</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtTipsAndTricksGuideAddTriplesNamedGraph" class="wikiword">SPARQL Tutorial — Magic of SPARUL and Sponger</a></li>
</ul><h2><a name="Related"></a> Related</h2>
<ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSponger" class="wikiword">Virtuoso Sponger</a> </li>
<li><a href="http://virtuoso.openlinksw.com/Whitepapers/html/VirtSpongerWhitePaper.html" class="absuri">Technical White Paper</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeSupportedDataSources" class="wikiword">Supported Virtuoso Sponger Cartridges</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/SPARQLSponger" class="wikiword">SPARQL Sponger</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtInteractSpongerMiddlewareRESTPatterns" class="wikiword">Interacting with Sponger Middleware via RESTful Patterns</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeSupportedDataSourcesMetaRESTExamples" class="wikiword">Interacting with Sponger Meta Cartridge via RESTful Patterns</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeRDFExtractor" class="wikiword">Sponger Cartridge RDF Extractor</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/RDFMappers" class="wikiword">Extending SPARQL IRI Dereferencing with RDF Mappers</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeProgrammersGuide" class="wikiword">Programmer Guide for Virtuoso Linked Data Middleware (&quot;Sponger&quot;)</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtProgrammerGuideRDFCartridge" class="wikiword">Create RDF Custom Cartridge Tutorial</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeSupportedDataSources" class="wikiword">OpenLink-supplied Virtuoso Sponger Cartridges</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtAuthServerUI" class="wikiword">Virtuoso Authentication Server</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtOAuthSPARQL" class="wikiword">Virtuoso SPARQL OAuth Tutorial</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerACL" class="wikiword">Virtuoso Sponger Access Control List (ACL) Setup</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSPARQLSecurityWebID" class="wikiword">WebID Protocol &amp; SPARQL Endpoint ACLs Tutorial</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html" class="absuri">Virtuoso Documentation</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtTipsAndTricksGuide" class="wikiword">Virtuoso Tips and Tricks Collection</a> </li>
</ul></div></body></html>