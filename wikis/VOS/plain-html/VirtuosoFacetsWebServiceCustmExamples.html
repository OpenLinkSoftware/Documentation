<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="VirtuosoFacetsWebService"}%--><p> </p>
<!--End of %META:TOPICPARENT{name="VirtuosoFacetsWebService"}%--><h1><a name="Virtuoso Facets Web Service: Examples for customizing different types"></a>Virtuoso Facets Web Service: Examples for customizing different types</h1>
<!--Begin of %TOC{}%--><p> </p><div class="MACRO_TOC">  <div class="wikitoc">   <ul> <li><a href="#Examples">Examples</a></li>
<ul><li><a href="#For%20people%20called%20Mike">For people called Mike</a></li> <li><a href="#To%20open%20the%20list%20of%20people%20who%20Mike%20knows">To open the list of people who Mike knows</a></li> <li><a href="#To%20show%20the%20list%20of%20subjects%20Mike%20knows">To show the list of subjects Mike knows</a></li> <li><a href="#To%20show%20the%20properties%20of%20people%20Mike%20knows">To show the properties of people Mike knows</a></li> <li><a href="#To%20show%20the%20names">To show the names</a></li> <li><a href="#To%20specify%20one%20named%20Joe">To specify one named Joe</a></li> <li><a href="#To%20show%20the%20Mikes%20that%20know%20a%20Joe">To show the Mikes that know a Joe</a></li> <li><a href="#To%20specify%20that%20Mike%20must%20be%20a%20member%20of%20a%20discussion%20board">To specify that Mike must be a member of a discussion board</a></li> <li><a href="#To%20pick%20all%20sioc%20members">To pick all sioc members</a></li> <li><a href="#To%20specify%20that%20the%20thing%20must%20be%20a%20forum">To specify that the thing must be a forum</a></li> <li><a href="#To%20specify%20sioc%3AForum">To specify sioc:Forum</a></li> <li><a href="#To%20look%20at%20the%20list%20of%20Mikes%20with%20the%20added%20restriction">To look at the list of Mikes with the added restriction</a></li> <li><a href="#To%20say%20that%20Joe%20must%20also%20have%20a%20geekCode">To say that Joe must also have a geekCode</a></li> <li><a href="#Pick%20geekCode">Pick geekCode</a></li> <li><a href="#To%20take%20the%20focus%20back%20to%20Mike">To take the focus back to Mike</a></li> <li><a href="#Looking%20up%20property%20count">Looking up property count</a></li> <li><a href="#Looking%20up%20instances%20of%20a%20class">Looking up instances of a class</a></li> </ul><li><a href="#Related">Related</a></li><p>  </p></ul>  </div> </div>
<!--End of %TOC{}%--><i><b>Note:</b> In all examples from below the default namespace declaration: <code>xmlns=&quot;<a href="http://openlinksw.com/services/facets/1.0/" class="absuri">http://openlinksw.com/services/facets/1.0/</a>&quot;</code>, is omitted for brevity.</i><h2><a name="Examples"></a>Examples</h2>
<h3><a name="For people called Mike"></a>For people called Mike</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt;
  &lt;view type=&quot;text&quot;/&gt;
&lt;/query&gt;
</pre><p> </p>
<h3><a name="To open the list of people who Mike knows"></a>To open the list of people who Mike knows</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt;
  &lt;view type=&quot;properties&quot;/&gt; 
&lt;/query&gt;
</pre><p> </p>
<h3><a name="To show the list of subjects Mike knows"></a>To show the list of subjects Mike knows</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;view type=&quot;list&quot; /&gt;
  &lt;/property&gt;
&lt;/query&gt;
</pre><p> </p>
<h3><a name="To show the properties of people Mike knows"></a>To show the properties of people Mike knows</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt;
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;view type=&quot;properties&quot; /&gt;
  &lt;/property&gt; 
&lt;/query&gt;
</pre><p> </p>
<h3><a name="To show the names"></a>To show the names</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;view type=&quot;list&quot; /&gt;
    &lt;/property&gt;
  &lt;/property&gt; 
&lt;/query&gt;
</pre><p> </p>
<h3><a name="To specify one named Joe"></a>To specify one named Joe</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
     &lt;property iri=&quot;[foaf:name]&quot;&gt;
        &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
     &lt;/property&gt;
    &lt;view type=&quot;properties&quot; /&gt;
  &lt;/property&gt; 
&lt;/query&gt;
</pre><p> This lists the properties of the friends of Mike that are called Joe.</p>
<h3><a name="To show the Mikes that know a Joe"></a>To show the Mikes that know a Joe</h3>
<p>To show the Mikes that know a Joe, one would change the shown variable in the navigation and get: </p>
<br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
   &lt;/property&gt; 
   &lt;view type=&quot;text&quot; /&gt; 
&lt;/query&gt;
</pre><p> This would be the search summaries of subjects with Mike in some field that know a subject with name Joe.</p>
<h3><a name="To specify that Mike must be a member of a discussion board"></a>To specify that Mike must be a member of a discussion board</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt;
  &lt;property iri=&quot;[foaf:knows]&quot;&gt;
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
     &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
   &lt;/property&gt;
  &lt;/property&gt; 
  &lt;view type=&quot;property-in&quot; /&gt; 
&lt;/query&gt;
</pre><p> This lists the properties of triples whom object is Mike.</p>
<h3><a name="To pick all sioc members"></a>To pick all sioc members</h3>
 Pick <code>sioc:member_of</code> <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt; 
    &lt;view type=&quot;list&quot; /&gt; 
  &lt;/property-of&gt; 
&lt;/query&gt;
</pre><p> This would show things where Mike is a member.</p>
<h3><a name="To specify that the thing must be a forum"></a>To specify that the thing must be a forum</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt; 
    &lt;view type=&quot;classes&quot; /&gt; 
  &lt;/property-of&gt; 
&lt;/query&gt;
</pre><p> This shows classes of things where Mike is a member.</p>
<p> </p>
<h3><a name="To specify sioc:Forum"></a>To specify sioc:Forum</h3>
 Clicking on <code>sioc:Forum</code> gives: <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt; 
    &lt;class iri=&quot;sioc:Forum&quot; /&gt; 
    &lt;view type=&quot;classes&quot;/&gt;  
  &lt;/property-of&gt;  
&lt;/query&gt;
</pre><p> The view stays with classes, but now scoped to the classes of things where Mike is a member that are instances of <code>sioc:Forum</code>.</p>
<p> </p>
<h3><a name="To look at the list of Mikes with the added restriction"></a>To look at the list of Mikes with the added restriction</h3>
 To go look at the list of Mikes with the added restriction, click the shown variable in the navigation and set it to <code>s1</code>.
<br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt; 
   &lt;class iri=&quot;sioc:Forum&quot; /&gt; 
  &lt;/property-of&gt; 
  &lt;view type=&quot;list&quot;/&gt; 
&lt;/query&gt;
</pre><p> </p>
<h3><a name="To say that Joe must also have a geekCode"></a>To say that Joe must also have a geekCode</h3>
 To say that Joe must also have a geekCode, one clicks the shown variable and sets it to <code>s2</code> and the view to properties.
<br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
    &lt;view type=&quot;properties&quot;/&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt; 
    &lt;class iri=&quot;sioc:Forum&quot; /&gt; 
   &lt;/property-of&gt;  
&lt;/query&gt;
</pre><p> </p>
<h3><a name="Pick geekCode"></a>Pick geekCode</h3>
 <br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
    &lt;property iri=&quot;geekCode&quot;&gt;
      &lt;view type=&quot;list&quot;/&gt;
    &lt;/property&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt;
    &lt;class iri=&quot;sioc:Forum&quot; /&gt; 
  &lt;/property-of&gt;  
&lt;/query&gt;
</pre><h3><a name="To take the focus back to Mike"></a>To take the focus back to Mike</h3>
 We specify no restriction on the geekCode.
 Click the shown variable to take the focus back to Mike.
<br><pre>&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt; 
  &lt;property iri=&quot;[foaf:knows]&quot;&gt; 
    &lt;property iri=&quot;[foaf:name]&quot;&gt;
      &lt;value datatype=&quot;string&quot;&gt;Joe&lt;/value&gt;
    &lt;/property&gt;
    &lt;property iri=&quot;geekCode&quot;&gt;&lt;/property&gt;
  &lt;/property&gt; 
  &lt;property-of iri=&quot;sioc:member_of&quot;&gt; 
    &lt;class iri=&quot;sioc:Forum&quot; /&gt; 
  &lt;/property-of&gt;   
  &lt;view type=&quot;text&quot;/&gt; 
&lt;/query&gt;
</pre><p> </p>
<h3><a name="Looking up property count"></a>Looking up property count</h3>
 <br><pre>curl -H &quot;Content-Type: text/xml&quot; -d @post.xml  http://lod.openlinksw.com/fct/service
</pre><p> Where &#39;<code>post.xml</code>&#39; document contains query document: </p>
<br><pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt;
  &lt;property iri=&quot;[foaf:knows]&quot;&gt;
    &lt;view type=&quot;list-count&quot; limit=&quot;20&quot; /&gt;
  &lt;/property&gt;
&lt;/query&gt;
</pre><p> Produces the <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoFacetsWebServiceCustmExamplesEx1" class="wikiword">following response</a>.</p>
<h3><a name="Looking up instances of a class"></a>Looking up instances of a class</h3>
 <br><pre>curl -H &quot;Content-Type: text/xml&quot; -d @post.xml  http://lod.openlinksw.com/fct/service
</pre><p> Where &#39;<code>post.xml</code>&#39; document contains query document: </p>
<br><pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;query&gt;
  &lt;text&gt;Mike&lt;/text&gt;
  &lt;class iri=&quot;[foaf:Person]&quot;/&gt;
  &lt;view type=&quot;list&quot; limit=&quot;10&quot; /&gt;
&lt;/query&gt;
</pre><p> Produces the <a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoFacetsWebServiceCustmExamplesEx2" class="wikiword">following response</a>.</p>
<i><b>Note:</b> If the entire &lt;text&gt; element is missing, the FCT service will not add a <code>bif:contains</code> to the triple pattern.
 Thus it is possible to search for some property or class, etc.
 For example: </i> <br><pre>&lt;query&gt;
  &lt;property iri=&quot;[foaf:knows]&quot;&gt;
    &lt;view type=&quot;properties&quot; limit=&quot;20&quot; offset=&quot;0&quot;/&gt;
  &lt;/property&gt;
&lt;/query&gt;
</pre><p> <i>is executed as:</i> </p>
<br><pre>SELECT  ?s2p AS ?c1 
        COUNT (*) AS ?c2  
WHERE
   { 
     ?s1  &lt;http://xmlns.com/foaf/0.1/knows&gt;  ?s2  . 
     ?s2  ?s2p  ?s2o  . 
   } 
GROUP BY ?s2p 
ORDER BY DESC 2 
LIMIT 20
</pre><h2><a name="Related"></a>Related</h2>
<ul><li>Facets Web Service: <ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoFacetsWebService" class="wikiword">Virtuoso Facets Web Service</a> </li>
</ul></li>
<li>Linked Data: <ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoFacetsViewsLinkedData" class="wikiword">Faceted Views over Large-Scale Linked Data</a> </li>
</ul></li>
<li>Facet Browser Installation and configuration: <ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtFacetBrowserInstallConfig" class="wikiword">Virtuoso Facet Browser Installation and configuration</a> </li>
</ul></li>
<li>Facet APIs: <ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtFacetBrowserAPIs" class="wikiword">Virtuoso APIs for FCT REST services</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtFacetBrowserAPIsFCTEXEC" class="wikiword"><code><nowiki>fct_exec</nowiki></code> API Example</a> </li>
</ul></li>
<li>Pivot Viewer and CXML: <ul><li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtSparqlCxmlFacetPivotBridge#AncSparqlCxmlFacetPivotBridge" class="absuri">Facet Pivot Bridge -  A bridge to PivotViewer from Virtuoso&#39;s Faceted query service for RDF</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtSparqlCxml#AncFacetTypeAutoDetection" class="absuri">Auto-Detection of Facet Type</a> </li>
</ul></li>
<li>Tutorials: <ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoLODSampleTutorial" class="wikiword">Faceted Browsing Sample using LOD Cloud Cache data space</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoFacetsWebServiceSOAPExample" class="wikiword">SOAP Facets Example</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtFacetBrowserInstallConfigQueried" class="wikiword">Querying The Facet Browser Web Service endpoint</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtVisualizeWithPivotViewer#GenFCT" class="absuri">Visualizing Your Data With PivotViewer Using The Facet Browser</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtTipsAndTricksCustomControlLabelsURI" class="wikiword">Custom Controlling Virtuoso Labels for URI functionality Example</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtuosoFacetsWebServiceChoiceExample" class="wikiword">Facets Web Service: Choice of Labels Example</a> </li>
</ul></li>
<li>Downloads: <ul><li><a href="http://shop.openlinksw.com/license_generator/virtuoso-download/" class="absuri">Latest Virtuoso</a> </li>
<li><a href="https://virtuoso.openlinksw.com/download/" class="absuri">Virtuoso Facet Browser VAD package</a></li>
</ul></li>
</ul></div></body></html>