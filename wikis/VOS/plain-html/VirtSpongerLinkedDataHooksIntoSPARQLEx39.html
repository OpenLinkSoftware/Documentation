<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="VirtSpongerLinkedDataHooksIntoSPARQL"}%--><p> </p>
<!--End of %META:TOPICPARENT{name="VirtSpongerLinkedDataHooksIntoSPARQL"}%--><p> </p>
<h1><a name="Example with pragma sql:gs-app-callback"></a>Example with pragma sql:gs-app-callback</h1>
<p> The following example demonstrates usage of the <code> sql:gs-app-callback </code> pragma.</p>
<p> </p>
<ol><li>Make sure the steps from the    <a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFGraphsSecurity#Example:%20Blogs%20and%20Resource%20Sharing" class="absuri">Blogs and Resource Sharing</a> Examples are performed.
</li>
<li>Let user for ex.
 &quot;Anna&quot; of application to get full access to graphs whose IRIs contain user&#39;s name in path.
   In addition, let all of them permission to use all graph groups and let the &quot;moderator&quot; user read everything: <br><pre><br>reconnect &quot;dba&quot;;

create function DB.DBA.SPARQL_GS_APP_CALLBACK_TEST (in g_iid IRI_ID, in app_uid varchar) returns integer
{
  declare g_uri varchar;
-- A fake IRI ID #i0 is used to mention account&#39;s default permissions for all graphs.
  if (#i0 = g_iid)
    {
      if (&#39;moderator&#39; = app_uid)
        return 9; -- Moderator can read and list everything.
      return 8; -- Other users can list everything.
    }
  g_uri := id_to_iri (g_iid);
  if (strstr (g_uri, &#39;/&#39; || app_uid || &#39;/&#39;))
    return 15; -- User has full access to &quot;his&quot; graph.
  return 8; -- User can list any given graph group.
}
;

SPARQL
define sql:gs-app-callback &quot;TEST&quot;
define sql:gs-app-uid &quot;Anna&quot;
SELECT ?g ?s WHERE { ?s &lt;p&gt; ?o }
;
</pre><br> </li>
</ol><h2><a name="Sponger Usage Examples"></a>Sponger Usage Examples</h2>
<ul><li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongerusageprocessorex" class="absuri">SPARQL Processor Usage Example</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongerusageproxyex2" class="absuri">RDF Proxy Service Example</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtDeployingLinkedDataGuide_BrowsingNorthwindRdfView#AncMozToc2" class="absuri">Browsing &amp; Exploring RDF View Example Using ODE</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtDeployingLinkedDataGuide_BrowsingNorthwindRdfView#AncMozToc3" class="absuri">Browsing &amp; Exploring RDF View Example Using iSPARQL</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/rdfinsertmethods.html#rdfinsertmethodplapissimpleexample" class="absuri">Basic Sponger Cartridge Example</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongerusagebriefex" class="absuri">HTTP Example for Extracting Metadata using CURL</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongercartridgetypesmetarestexamples" class="absuri">RESTFul Interaction Examples</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/sect5_virtuosospongercreatecustcartrrgstflickr.html" class="absuri">Flickr Cartridge Example</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html#virtuosospongercreatecustcartrexmp" class="absuri">MusicBrainz Metadatabase Example</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtTipsAndTricksGuideAddTriplesNamedGraph" class="wikiword">SPARQL Tutorial -- Magic of  SPARUL and Sponger</a></li>
</ul><h2><a name="Related"></a>Related</h2>
<ul><li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerLinkedDataHooksIntoSPARQL" class="wikiword">Sponger&#39;s Linked Data Middleware Hooks into SPARQL</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSponger" class="wikiword">Virtuoso Sponger</a> </li>
<li><a href="http://virtuoso.openlinksw.com/Whitepapers/html/VirtSpongerWhitePaper.html" class="absuri">Technical White Paper</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeSupportedDataSources" class="wikiword">Supported Virtuoso Sponger Cartridges</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/SPARQLSponger" class="wikiword">SPARQL Sponger</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtInteractSpongerMiddlewareRESTPatterns" class="wikiword">Interacting with Sponger Middleware via RESTful Patterns</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeSupportedDataSourcesMetaRESTExamples" class="wikiword">Interacting with Sponger Meta Cartridge via RESTful Patterns</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeRDFExtractor" class="wikiword">Sponger Cartridge RDF Extractor</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/RDFMappers" class="wikiword">Extending SPARQL IRI Dereferencing with RDF Mappers</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeProgrammersGuide" class="wikiword">Programmer Guide for Virtuoso Linked Data Middleware (&quot;Sponger&quot;)</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtProgrammerGuideRDFCartridge" class="wikiword">Create RDF Custom Cartridge Tutorial</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerCartridgeSupportedDataSources" class="wikiword">OpenLink-supplied Virtuoso Sponger Cartridges</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtAuthServerUI" class="wikiword">Virtuoso Authentication Server</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtOAuthSPARQL" class="wikiword">Virtuoso SPARQL OAuth Tutorial</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSpongerACL" class="wikiword">Virtuoso Sponger Access Control List (ACL) Setup</a> </li>
<li><a href="http://vos.openlinksw.com:80/dataspace/owiki/wiki/VOS/VirtSPARQLSecurityWebID" class="wikiword">WebID Protocol &amp; SPARQL Endpoint ACLs Tutorial</a> </li>
<li><a href="http://docs.openlinksw.com/virtuoso/virtuososponger.html" class="absuri">Virtuoso Documentation</a></li>
</ul></div></body></html>