<docbook><section><title>VirtSparqlCxmlFAQsHtml</title><para> </para>
<title>Pivot Collections (Part 8)</title>Pivot Collections (Part 8)
<bridgehead class="http://www.w3.org/1999/xhtml:h2">Contents</bridgehead>
<para>Part 1: <ulink url="VirtSparqlCxmlHtml">Introduction</ulink></para>
<para>Part 2: <ulink url="VirtSparqlCxmlHtml">SparqlCxml</ulink></para>
<para>Part 3: <ulink url="VirtSparqlCxmlDzcsHtml">SparqlCxml Deep Zoom Collections</ulink></para>
<para>Part 4: <ulink url="VirtSparqlCxmlHtmlPivotViewer">HtmlPivotViewer</ulink></para>
<para>Part 5: <ulink url="VirtSparqlCxmlImportHtml">Importing CXML</ulink></para>
<para>Part 6: <ulink url="VirtSparqlCxmlFacetPivotBridgeHtml">Facet Pivot Bridge</ulink></para>
<para>Part 7: <ulink url="VirtSparqlCxmlDETsHtml">DETs : Persisting SPARQL Query Results to DAV</ulink></para>
<para>Part 8: Frequently Asked Questions (FAQs)</para>
<itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncSparqlCxmlFAQs">Frequently Asked Questions</ulink> <itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncFaqSparqlCxml"><span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiSparqlCxml</span> FAQs</ulink> <itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncSCFaqSparqlCxmlReleases">Which Virtuoso releases support <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiSparqlCxml</span> and <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span>?</ulink> </listitem>
<listitem><ulink url="#AncSCFaqThirdPartySparqlEndpoints">Are third-party (non-Virtuoso) SPARQL endpoints supported?</ulink> </listitem>
<listitem><ulink url="#AncSCSparqlQryTypes">Which SPARQL query types does <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiSparqlCxml</span> support?</ulink> </listitem>
<listitem><ulink url="#AncSCCxmlSizeLimits">Are there limits on the size of a collection? How are large result sets handled?</ulink> </listitem>
<listitem><ulink url="#AncSCImageMagick">Do I need to install <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiImageMagick</span>?</ulink> </listitem>
<listitem><ulink url="#AncSCSlowToLoad">Why are my collections sometimes slow to load?</ulink> </listitem>
<listitem><ulink url="#AncSCLoadTimeReduction">How can I reduce the collection load time?</ulink> </listitem>
</itemizedlist></listitem>
<listitem><ulink url="#AncFaqPivotViewer"><span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span> FAQs</ulink> <itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncPVFaqBrowserPlatform">Which browsers and platforms support <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span>?</ulink> </listitem>
<listitem><ulink url="#AncPVFaqPermalinks">Can I create social bookmarks to <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span> collections?</ulink> </listitem>
<listitem><ulink url="#AncPVFaqPresResDecoupling">How do I decouple presentation from representation?</ulink> </listitem>
<listitem><ulink url="#AncPVCollLoadsImagesBlank">My collection has loaded but why are my images blank?</ulink> </listitem>
<listitem><ulink url="#AncPVLoadedEmpty"><span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span> has loaded but why is it empty?</ulink> </listitem>
<listitem><ulink url="#AncPVFixParseError">How can I fix an <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span> collection parsing error?</ulink> </listitem>
<listitem><ulink url="#AncPVFixDownloadError">How can I fix an <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer</span> collection downloading error?</ulink> </listitem>
<listitem><ulink url="#AncPVFixDownloadDZError">How can I fix an <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiHtmlPivotViewer DeepZoom</span> cache downloading error?</ulink></listitem>
</itemizedlist></listitem>
</itemizedlist></listitem>
</itemizedlist><para>Part 9: <ulink url="VirtSparqlCxmlGlossaryHtml">Glossary</ulink></para>
<para> <ulink url="">
 </ulink></para>
<bridgehead class="http://www.w3.org/1999/xhtml:h2">Frequently Asked Questions</bridgehead>
  <ulink url="">
 <bridgehead class="http://www.w3.org/1999/xhtml:h3">SparqlCxml FAQs</bridgehead>
<ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which Virtuoso releases support SparqlCxml and HtmlPivotViewer?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>SparqlCxml and HtmlPivotViewer require Virtuoso Commercial Edition V6.2 (Build 3129 or later).
 SparqlCxml is not supported in Virtuoso Open Source Edition (VOS).</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Are third-party (non-Virtuoso) SPARQL endpoints supported?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Third-party SPARQL endpoints are supported through Virtuoso&#39;s SPARQL-FED (Federated SPARQL) support.
 CXML can be generated from a third-party endpoint without this native facility by routing the query through a Virtuoso SPARQL endpoint, stipulating the third-party endpoint in a SERVICE clause.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which SPARQL query types does SparqlCxml support?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>SparqlCxml, that is CXML generated directly from the /sparql endpoint, supports SELECT, DESCRIBE and CONSTRUCT queries.
 All CXML generated by the Facet Pivot Bridge uses an internal DESCRIBE.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Are there limits on the size of a collection? How are large result sets handled?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Memory constraints limit the maximum collection size the HtmlPivotViewer control can handle.
 To mitigate the effects of this limit, the Facet Pivot Bridge supports paged collections.
 Large collections are split into pages whose size is controlled through a &#39;Page size&#39; control in the bridge interface.
 Each page constitutes a sub-collection, containing no more than the number of items specified by the page size.
 The sub-collections are linked through first, last, next and previous links under the &#39;Related Collections&#39; section of the HtmlPivotViewer display.
 The bridge also imposes a configurable limit (default 5MB) on the size of the CXML files it generates.
</listitem>
<listitem>Collections generated directly from queries against a Virtuoso /sparql endpoint can be controlled through an appropriate LIMIT qualifier.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Do I need to install ImageMagick?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>No.
 Virtuoso Commercial Edition releases include a bundled ImageMagick plugin.
 The plugin is standalone and includes all the functionality needed to generate Deep  Zoom images.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Why are my collections sometimes slow to load?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>HtmlPivotViewer collections can be significantly slower to load than a simple web page.
 Many factors can influence the load time, however there are several actions you can take to reduce it.
 Choosing between them requires understanding which parts of the collection delivery pipeline can be the most time-intensive.
 Possible factors to consider include: <itemizedlist mark="bullet" spacing="compact"><listitem>The characteristics of the SPARQL query and the result set size <itemizedlist mark="bullet" spacing="compact"><listitem>Virtuoso&#39;s query execution speed is generally excellent.
 Obviously though, the query time is heavily influenced by the result set size.
 SPARQL-FED queries to a remote sparql endpoint will, unsurprisingly, be slower than to the local endpoint.
</listitem>
</itemizedlist></listitem>
<listitem>Loading of the collection by the HtmlPivotViewer control <itemizedlist mark="bullet" spacing="compact"><listitem>The CXML file for large collections can be several MBs.
 Depending on the available bandwidth, there may be a noticeable delay while HtmlPivotViewer retrieves and loads a file of this size.
</listitem>
</itemizedlist></listitem>
<listitem>Image processing and rendering <itemizedlist mark="bullet" spacing="compact"><listitem>In addition to the normal query processing and conversion of the result set to CXML, the collection generation pipeline must generate a 3-level Deep Zoom image (DZI) pyramid for each item.</listitem>
</itemizedlist></listitem>
</itemizedlist></listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I reduce the collection load time?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Reduce the query resultset size <itemizedlist mark="bullet" spacing="compact"><listitem>by adding a LIMIT clause to the query, if generating the CXML from a /sparql endpoint or </listitem>
<listitem>by using the Facet Pivot Bridge&#39;s collection paging feature </listitem>
</itemizedlist></listitem>
<listitem>Exploit SparqlCxml&#39;s image cache <itemizedlist mark="bullet" spacing="compact"><listitem>When a collection is first generated, all the images for the DZC must be downloaded, resized and converted to 3-level DZIs.
 The source images and the DZIs are then cached for 24 hours.
 Subsequent renderings of the collection inside this window will not carry this image processing overhead </listitem>
</itemizedlist></listitem>
<listitem>Use a materialized view <itemizedlist mark="bullet" spacing="compact"><listitem>Rather than generating a collection dynamically each time it&#39;s viewed, use a materialized view in the form of a SparqlCxml DET (a virtual hypermedia resource), or a CXML snapshot generated by the Facet Pivot Bridge.</listitem>
</itemizedlist></listitem>
</itemizedlist><para> <ulink url="">
 </ulink></para>
<bridgehead class="http://www.w3.org/1999/xhtml:h3">HtmlPivotViewer FAQs</bridgehead>
<ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which browsers and platforms support HtmlPivotViewer?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>HtmlPivotViewer is supported on all browsers that support HTML5.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Can I create social bookmarks to HtmlPivotViewer collections?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Yes.
 HtmlPivotViewer integrates with the AddThis social bookmarking service via an AddThis widget.
 From the HtmlPivotViewer interface, you can create a permalink for the collection being viewed and post it to a variety of social network sites including Facebook, Twitter, Google Bookmarks, Delicious etc.
 In order to use this service, you require a key.
 HtmlPivotViewer looks for an AddThis key in the Virtuoso registry.
 If one isn&#39;t found, it uses a temporary key.
 You can add your personal AddThis key to the Virtuoso registry using Virtuoso&#39;s registry_set function, using &#39;_pivot_AddThis&#39; for the key name.</listitem>
</itemizedlist><para> <ulink url="">
 </ulink></para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How do I decouple presentation from representation?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>One of the key tenets of Linked Data is the decoupling of the visual presentation of an entity from its data representation.
 HtmlPivotViewer supports this decoupling by making a collection&#39;s CXML data available in other raw Linked Data formats.
 These other formats (N-Triples, N3/Turtle, JSON, XML and OData) are accessible through links at the foot of the HtmlPivotViewer display which include alternate &amp;output= query string settings appended to the SPARQL query URI.
 e.g.
<itemizedlist mark="bullet" spacing="compact"><listitem>N3/Turtle: http://linkeddata.uriburner.com/sparql?default-graph-uri=?&amp;query=DESCRIBE?&amp;output=ext%2Frdf%2Bn3? </listitem>
<listitem>JSON: http://linkeddata.uriburner.com/sparql?default-graph-uri=?&amp;query=DESCRIBE?&amp;output=application%2Frdf%2Bjson </listitem>
</itemizedlist></listitem>
<listitem>Other (i.e.
 non-HtmlPivotViewer) presentations of an entity, for instance in HTML, can provide access to the base entity data using the same approach.
 Simply include links similiar to that below in the &lt;head&gt; section of your (static or dynamically generated) HTML page.
<programlisting>  &lt;link rel=&quot;alternate&quot; title=&quot;My data in Linked Data form&quot;
   type=&quot;application/rdf+xml&quot;
   href=&quot;http://linkeddata.uriburner.com/sparql?default-graph-uri=?&amp;query=DESCRIBE?&amp;output=ext%2Frdf%2Bn3/&gt;&quot; 
</programlisting></listitem>
<listitem>As an alternative to explicitly stating the required data format through &amp;output=, Virtuoso&#39;s support for HTTP content negotiation allows clients to request the desired format through HTTP Accept headers.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">My collection has loaded but why are my images blank?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>If the collection has loaded and the Filter Pane contains the facets but there are no images in the tile pane just a blue box when highlighted with the the mouse then there there is is a problem with the deep zoom images associated with the collection.
 If the collection has been generated by Virtuoso then it is likely that  the Virtuoso ImageMagick plugin has not been correctly loaded.
 In your virtuoso.ini in the [Plugins] section make sure you have a lines for &quot;plain, im&quot; and &quot;plain, qrcode&quot; like this: <programlisting>[Plugins]
LoadPath=../hosting
...
Load6=plain, im
Load7=plain, qrcode
</programlisting>Remember to restart Virtuoso if you make any changes to your virtuoso.ini.
</listitem>
<listitem>If the collection has loaded but you do not see individual images for each item but instead you see the the generic triple symbol you may need to reset the deepzoom cache.
 This can be done from isql or the Virtuoso conductor by executing the following stored procedure: <programlisting>db.dba.dzc_reset();
</programlisting> <ulink url="">
 </ulink></listitem>
</itemizedlist><bridgehead class="http://www.w3.org/1999/xhtml:h4">HtmlPivotViewer has loaded but why is it empty?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>This can happen when the HtmlPivotViewer editor is used to enter a new SPARQL query but the SPARQL-CXML VAD has not been installed.
 Download the VAD from <ulink url="https://virtuoso.openlinksw.com/download/">sparql_cxml_dav.vad</ulink>, install it on the server where you are executing the query then retry the query.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I fix a HtmlPivotViewer collection parsing error?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>On opening the collection you get a message box with the title HTML5 PivotViewer and the message Error parsing CXML Collection.
 This error indicates that there is a syntax error in the cxml file.
 The message box gives the URL of the collection and also a further message from the xml parser which may contain a line and character number to pinpoint exactly where the problem is.
 To resolve this kind of problem it is often helpful to look at the cxml file directly.
 Click on the <emphasis>CXML</emphasis> link in the <emphasis>Raw Linked Data formats</emphasis> section at the bottom of the page.
 Note: in FireFox, Opera and Internet Explorer the cxml is displayed as xml in the browser window, while in Safari and Chrome you will have to look at the page source.
 However, the xml formatting in FireFox, Opera and Internet Explorer may mean that the line numbers in the error message do not match the line number in the browser window so in all cases it may be best to look at the page source.
 Alternatively, you could use curl to download the file and then examine it in a text editor.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I fix a HtmlPivotViewer collection downloading error?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>On opening the collection you get a message box with the title HTML5 PivotViewer and the message Error loading CXML collection.
 This error is a very general error that means the HtmlPivotViewer has not been able to download a collection from the supplied URL and can occur for a number of reasons.
 The simplest is that the URL has been typed incorrectly.
 The message box contains the URL.
 Try pasting that URL in the address bar of a browser.
 If it is correct you should be able to see the contents of the collection cxml file.
 Note: in FireFox, Opera and Internet Explorer the cxml is displayed as xml in the browser window, while in Safari and Chrome it is best to look at the page source.
 If the URL is in the form <programlisting>http://your server name:your server port/proxy/?url=the collection url
</programlisting>then it can be helpful to try pasting just the collection url in to a browser.
 If just the collection url loads the cxml file correctly but the proxy url fails then the proxy service on your server may not be enabled.
<para> If the collection has been generated dynamically from a SPARQL query and there is a problem generating the collection then you will also get a download error.
 In the message box you may get an additional message with an HTTP response code 500 and message &quot;internal server error&quot;  This typically means that the SPARQL query has failed.
 A good troubleshooting method when this error occurs is to click on the <emphasis>CXML</emphasis> link in the <emphasis>Raw Linked Data formats</emphasis> section at the bottom of the page.
 If the query is failing then you will get a more detailed error message that should help you resolve the problem.</para></listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I fix a HtmlPivotViewer DeepZoom cache downloading error?</bridgehead>
 * On opening the collection you get a message box with the title HTML5 PivotViewer and the message Error loading from DeepZoom cache.
 This error can occur if the server hosting the collection has not allowed access to the DeepZoom cache using Cross Origin Resource Sharing (CORS) or the permissions on the DeepZoom collection do not allow read access.
 Cross Origin Resource Sharing must be enabled on the server using the Virtuoso Conductor.
 See the <ulink url="http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VirtTipsAndTricksGuideCORSSetup">Virtuoso Tips and Tricks Guide</ulink>.</ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></section></docbook>