<docbook><section><title>VirtSparqlCxmlFAQs</title><para> </para>
<title>Pivot Collections (Part 8)</title>Pivot Collections (Part 8)
<bridgehead class="http://www.w3.org/1999/xhtml:h2">Contents</bridgehead>
<para>Part 1: <ulink url="VirtSparqlCxml">Introduction</ulink></para>
<para>Part 2: <ulink url="VirtSparqlCxml">SparqlCxml</ulink></para>
<para>Part 3: <ulink url="VirtSparqlCxmlDzcs">SparqlCxml Deep Zoom Collections</ulink></para>
<para>Part 4: <ulink url="VirtSparqlCxmlPivotViewer">PivotViewer</ulink></para>
<para>Part 5: <ulink url="VirtSparqlCxmlImport">Importing CXML</ulink></para>
<para>Part 6: <ulink url="VirtSparqlCxmlFacetPivotBridge">Facet Pivot Bridge</ulink></para>
<para>Part 7: <ulink url="VirtSparqlCxmlDETs">DETs : Persisting SPARQL Query Results to DAV</ulink></para>
<para>Part 8: Frequently Asked Questions (FAQs)</para>
<itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncSparqlCxmlFAQs">Frequently Asked Questions</ulink> <itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncFaqSparqlCxml"><span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiSparqlCxml</span> FAQs</ulink> <itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncSCFaqSparqlCxmlReleases">Which Virtuoso releases support <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiSparqlCxml</span> and <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span>?</ulink> </listitem>
<listitem><ulink url="#AncSCFaqThirdPartySparqlEndpoints">Are third-party (non-Virtuoso) SPARQL endpoints supported?</ulink> </listitem>
<listitem><ulink url="#AncSCSparqlQryTypes">Which SPARQL query types does <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiSparqlCxml</span> support?</ulink> </listitem>
<listitem><ulink url="#AncSCCxmlSizeLimits">Are there limits on the size of a collection? How are large result sets handled?</ulink> </listitem>
<listitem><ulink url="#AncSCImageMagick">Do I need to install <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiImageMagick</span>?</ulink> </listitem>
<listitem><ulink url="#AncSCSlowToLoad">Why are my collections sometimes slow to load?</ulink> </listitem>
<listitem><ulink url="#AncSCLoadTimeReduction">How can I reduce the collection load time?</ulink> </listitem>
</itemizedlist></listitem>
<listitem><ulink url="#AncFaqPivotViewer"><span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span> FAQs</ulink> <itemizedlist mark="bullet" spacing="compact"><listitem><ulink url="#AncPVFaqBrowserPlatform">Which browsers and platforms support <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span>?</ulink> </listitem>
<listitem><ulink url="#AncPVFaqPermalinks">Can I create social bookmarks to <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span> collections?</ulink> </listitem>
<listitem><ulink url="#AncPVFaqMapProvider">Which web mapping services does <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span> support?</ulink> </listitem>
<listitem><ulink url="#AncPVFaqPresResDecoupling">How do I decouple presentation from representation?</ulink> </listitem>
<listitem><ulink url="#AncPVCollLoadsImagesBlank">My collection has loaded but why are my images blank?</ulink> </listitem>
<listitem><ulink url="#AncPVLoadedEmpty"><span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span> has loaded but why is it empty?</ulink> </listitem>
<listitem><ulink url="#AncPVFixParseError">How can I fix a <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span> collection parsing error?</ulink> </listitem>
<listitem><ulink url="#AncPVFixDownloadError">How can I fix a <span style="color: red">
      UNKNOWN tag:
      http://www.w3.org/1999/xhtml:nowikiPivotViewer</span> collection downloading error?</ulink></listitem>
</itemizedlist></listitem>
</itemizedlist></listitem>
</itemizedlist><para>Part 9: <ulink url="VirtSparqlCxmlGlossary">Glossary</ulink></para>
<para> <ulink url="">
 </ulink></para>
<bridgehead class="http://www.w3.org/1999/xhtml:h2">Frequently Asked Questions</bridgehead>
  <ulink url="">
 <bridgehead class="http://www.w3.org/1999/xhtml:h3">SparqlCxml FAQs</bridgehead>
<ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which Virtuoso releases support SparqlCxml and PivotViewer?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>SparqlCxml and PivotViewer require Virtuoso Commercial Edition V6.2 (Build 3129 or later).
 SparqlCxml is not supported in Virtuoso Open Source Edition (VOS).</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Are third-party (non-Virtuoso) SPARQL endpoints supported?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Third-party SPARQL endpoints are supported through Virtuoso&#39;s SPARQL-FED (Federated SPARQL) support.
 CXML can be generated from a third-party endpoint without this native facility by routing the query through a Virtuoso SPARQL endpoint, stipulating the third-party endpoint in a SERVICE clause.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which SPARQL query types does SparqlCxml support?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>SparqlCxml, that is CXML generated directly from the /sparql endpoint, supports SELECT, DESCRIBE and CONSTRUCT queries.
 All CXML generated by the Facet Pivot Bridge uses an internal DESCRIBE.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Are there limits on the size of a collection? How are large result sets handled?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Memory constraints limit the maximum collection size the Silverlight PivotViewer control can handle.
 To mitigate the effects of this limit, the Facet Pivot Bridge supports paged collections.
 Large collections are split into pages whose size is controlled through a &#39;Page size&#39; control in the bridge interface.
 Each page constitutes a sub-collection, containing no more than the number of items specified by the page size.
 The sub-collections are linked through first, last, next and previous links under the &#39;Related Collections&#39; section of the PivotViewer display.
 The bridge also imposes a configurable limit (default 5MB) on the size of the CXML files it generates.
</listitem>
<listitem>Collections generated directly from queries against a Virtuoso /sparql endpoint can be controlled through an appropriate LIMIT qualifier.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Do I need to install ImageMagick?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>No.
 Virtuoso Commercial Edition releases include a bundled ImageMagick plugin.
 The plugin is standalone and includes all the functionality needed to generate Deep  Zoom images.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Why are my collections sometimes slow to load?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>PivotViewer collections can be significantly slower to load than a simple web page.
 Many factors can influence the load time, however there are several actions you can take to reduce it.
 Choosing between them requires understanding which parts of the collection delivery pipeline can be the most time-intensive.
 Possible factors to consider include: <itemizedlist mark="bullet" spacing="compact"><listitem>The characteristics of the SPARQL query and the result set size <itemizedlist mark="bullet" spacing="compact"><listitem>Virtuoso&#39;s query execution speed is generally excellent.
 Obviously though, the query time is heavily influenced by the result set size.
 SPARQL-FED queries to a remote sparql endpoint will, unsurprisingly, be slower than to the local endpoint.
</listitem>
</itemizedlist></listitem>
<listitem>Loading of the collection by the PivotViewer control <itemizedlist mark="bullet" spacing="compact"><listitem>The CXML file for large collections can be several MBs.
 Depending on the available bandwidth, there may be a noticeable delay while PivotViewer retrieves and loads a file of this size.
</listitem>
</itemizedlist></listitem>
<listitem>Image processing and rendering <itemizedlist mark="bullet" spacing="compact"><listitem>In addition to the normal query processing and conversion of the result set to CXML, the collection generation pipeline must generate a 3-level Deep Zoom image (DZI) pyramid for each item.
 Further, it appears that the Silverlight control doesn&#39;t work smartly with data, making no use of cursors or paging, and instead making a local cache of all the data (and images).
</listitem>
</itemizedlist></listitem>
<listitem>The quality of any source geo-location data <itemizedlist mark="bullet" spacing="compact"><listitem>Geo-location data directly available in the source data as latitude and longitude requires no conversion and is fast to render in PivotViewer&#39;s map view.
 Less precise location information, like place names, is converted to geo-data by passing it to Bing Map&#39;s geocode service.</listitem>
</itemizedlist></listitem>
</itemizedlist></listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I reduce the collection load time?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Reduce the query resultset size <itemizedlist mark="bullet" spacing="compact"><listitem>by adding a LIMIT clause to the query, if generating the CXML from a /sparql endpoint or </listitem>
<listitem>by using the Facet Pivot Bridge&#39;s collection paging feature </listitem>
</itemizedlist></listitem>
<listitem>Exploit SparqlCxml&#39;s image cache <itemizedlist mark="bullet" spacing="compact"><listitem>When a collection is first generated, all the images for the DZC must be downloaded, resized and converted to 3-level DZIs.
 The source images and the DZIs are then cached for 24 hours.
 Subsequent renderings of the collection inside this window will not carry this image processing overhead </listitem>
</itemizedlist></listitem>
<listitem>Use a materialized view <itemizedlist mark="bullet" spacing="compact"><listitem>Rather than generating a collection dynamically each time it&#39;s viewed, use a materialized view in the form of a SparqlCxml DET (a virtual hypermedia resource), or a CXML snapshot generated by the Facet Pivot Bridge.
</listitem>
</itemizedlist></listitem>
<listitem>Exploit PivotViewer&#39;s geo-data caching <itemizedlist mark="bullet" spacing="compact"><listitem>Encoding geo-location information directly as latitude and longitude values in the source data is the most efficient option.
 If the data instead uses location names, the overhead in converting these names to geo-data is incurred when a map view of the collection is rendered for the first time.
 Subsequent map views should be much quicker to display because all geo-data generated from place names is permanently cached in local Silverlight Application Storage (until the 1MB cache limit is reached, at which point the action taken depends on a user&#39;s Silverlight preferences).</listitem>
</itemizedlist></listitem>
</itemizedlist><para> <ulink url="">
 </ulink></para>
<bridgehead class="http://www.w3.org/1999/xhtml:h3">PivotViewer FAQs</bridgehead>
<ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which browsers and platforms support PivotViewer?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>PivotViewer is supported on all Silverlight supported platforms and browsers: <itemizedlist mark="bullet" spacing="compact"><listitem>Windows, Mac OS X </listitem>
<listitem>Firefox (3+), Internet Explorer, Safari (3+), Chrome (4+), Opera (11) </listitem>
<listitem>For precise details of Silverlight compatible browsers and operating systems (plus any required service packs), refer to <ulink url="http://www.microsoft.com/getsilverlight/Get-Started/Install/Default.aspx">Microsoft&#39;s Get Silverlight page</ulink>.</listitem>
</itemizedlist></listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Can I create social bookmarks to PivotViewer collections?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>Yes.
 PivotViewer integrates with the AddThis social bookmarking service via an AddThis widget.
 From the PivotViewer interface, you can create a permalink for the collection being viewed and post it to a variety of social network sites including Facebook, Twitter, Google Bookmarks, Delicious etc.
 In order to use this service, you require a key.
 PivotViewer looks for an AddThis key in the Virtuoso registry.
 If one isn&#39;t found, it uses a temporary key.
 You can add your personal AddThis key to the Virtuoso registry using Virtuoso&#39;s registry_set function, using &#39;_pivot_AddThis&#39; for the key name.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">Which web mapping services does PivotViewer support?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>PivotViewer&#39;s map view works with both Google Maps and Bing Maps, with Bing Maps the preferred option.
 Location information is displayed on a fully interactive Bing map.
 In order for Bing Maps to work, you must first add a Bing maps key to the Virtuoso registry using registry_set (&#39;_pivot_BingMapsKey&#39;,&#39;yourkey&#39;).
 A Bing map key can be obtained by creating an account at the <ulink url="http://www.bingmapsportal.com/">Bing Maps Account Centre</ulink>.
 If a valid Bing key is not found, PivotViewer defaults to using a static Google map.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How do I decouple presentation from representation?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>One of the key tenets of Linked Data is the decoupling of the visual presentation of an entity from its data representation.
 PivotViewer supports this decoupling by making a collection&#39;s CXML data available in other raw Linked Data formats.
 These other formats (N-Triples, N3/Turtle, JSON, XML and OData) are accessible through links at the foot of the PivotViewer display which include alternate &amp;output= query string settings appended to the SPARQL query URI.
 e.g.
<itemizedlist mark="bullet" spacing="compact"><listitem>N3/Turtle: http://linkeddata.uriburner.com/sparql?default-graph-uri=?&amp;query=DESCRIBE?&amp;output=ext%2Frdf%2Bn3? </listitem>
<listitem>JSON: http://linkeddata.uriburner.com/sparql?default-graph-uri=?&amp;query=DESCRIBE?&amp;output=application%2Frdf%2Bjson </listitem>
</itemizedlist></listitem>
<listitem>Other (i.e.
 non-PivotViewer) presentations of an entity, for instance in HTML, can provide access to the base entity data using the same approach.
 Simply include links similiar to that below in the &lt;head&gt; section of your (static or dynamically generated) HTML page.
<programlisting>  &lt;link rel=&quot;alternate&quot; title=&quot;My data in Linked Data form&quot;
   type=&quot;application/rdf+xml&quot;
   href=&quot;http://linkeddata.uriburner.com/sparql?default-graph-uri=?&amp;query=DESCRIBE?&amp;output=ext%2Frdf%2Bn3/&gt;&quot; 
</programlisting></listitem>
<listitem>As an alternative to explicitly stating the required data format through &amp;output=, Virtuoso&#39;s support for HTTP content negotiation allows clients to request the desired format through HTTP Accept headers.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">My collection has loaded but why are my images blank?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>If the collection has loaded and the Filter Pane contains the facets but there are no images in the tile pane just a blue box when highlighted with the the mouse then there there is is a problem with the deep zoom images associated with the collection.
 If the collection has been generated by Virtuoso then it is likely that  the Virtuoso ImageMagick plugin has not been correctly loaded.
 In your virtuoso.ini in the [Plugins] section make sure you have a lines for &quot;plain, im&quot; and &quot;plain, qrcode&quot; like this: <programlisting>[Plugins]
LoadPath=../hosting
...
Load6=plain, im
Load7=plain, qrcode
</programlisting>Remember to restart Virtuoso if you make any changes to your virtuoso.ini.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">PivotViewer has loaded but why is it empty?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>This can happen when the PivotViewer editor is used to enter a new SPARQL query but the SPARQL-CXML VAD has not been installed.
 Download the VAD from <ulink url="https://virtuoso.openlinksw.com/download/">sparql_cxml_dav.vad</ulink>, install it on the server where you are executing the query then retry the query.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I fix a PivotViewer collection parsing error?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>On opening the collection you get a message box with the title PivotViewer Error and the message Error parsing the collection.
 This error indicates that there is a syntax error in the cxml file.
 The message box gives the URL of the collection and also a further message from the xml parser which may contain a line and character number to pinpoint exactly where the problem is.
 To resolve this kind of problem it is often helpful to look at the cxml file directly.
 Click on the <emphasis>CXML</emphasis> link in the <emphasis>Raw Linked Data formats</emphasis> section at the bottom of the page.
 Note: in FireFox, Opera and Internet Explorer the cxml is displayed as xml in the browser window, while in Safari and Chrome you will have to look at the page source.
 However, the xml formatting in FireFox, Opera and Internet Explorer may mean that the line numbers in the error message do not match the line number in the browser window so in all cases it may be best to look at the page source.
 Alternatively, you could use curl to download the file and then examine it in a text editor.</listitem>
</itemizedlist><ulink url="">
<para> </para>
<bridgehead class="http://www.w3.org/1999/xhtml:h4">How can I fix a PivotViewer collection downloading error?</bridgehead>
 <itemizedlist mark="bullet" spacing="compact"><listitem>On opening the collection you get a message box with the title PivotViewer Error and the message Error downloading the collection.
 This error is a very general error that means the PivotViewer has not been able to download a collection from the supplied URL and can occur for a number of reasons.
 The simplest is that the URL has been typed incorrectly.
 The message box contains the URL.
 Try pasting that URL in the address bar of a browser.
 If it is correct you should be able to see the contents of the collection cxml file.
 Note: in FireFox, Opera and Internet Explorer the cxml is displayed as xml in the browser window, while in Safari and Chrome it is best to look at the page source.
 If the URL is in the form <programlisting>http://your server name:your server port/proxy/?url=the collection url
</programlisting>then it can be helpful to try pasting just the collection url in to a browser.
 If just the collection url loads the cxml file correctly but the proxy url fails then the proxy service on your server may not be enabled.
<para> The second reason for encountering a download error is that the server hosting the collection has not allowed access using the clientaccesspolicy.xml or the permissions on the collection or deepzoom collection do not allow read access.
 In this case there will be a further message displayed in the message box saying that there was a Security Exception.
 For more information on the clientaccesspolicy.xml file see <ulink url="http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx.">http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx.</ulink> </para><para> If the collection has been generated dynamically from a SPARQL query and there is a problem generating the collection then you will also get a download error.
 In the message box you may get an additional message with an HTTP response code 500 and message &quot;internal server error&quot;  This typically means that the SPARQL query has failed.
 A good troubleshooting method when this error occurs is to click on the <emphasis>CXML</emphasis> link in the <emphasis>Raw Linked Data formats</emphasis> section at the bottom of the page.
 If the query is failing then you will get a more detailed error message that should help you resolve the problem.</para></listitem>
</itemizedlist></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></ulink></section></docbook>