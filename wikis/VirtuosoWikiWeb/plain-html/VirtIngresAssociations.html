<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="VirtIngresEntityFrameworkUsage"}%--><p> <br></p><!--End of %META:TOPICPARENT{name="VirtIngresEntityFrameworkUsage"}%--><h3><a name="Manually creating EDM Associations (FKs) for the Ingres Tutorial database"></a>Manually creating EDM Associations (FKs) for the Ingres Tutorial database</h3>
<p>The following steps will detail what is required to manually create <strong>Associations</strong> in your Entity Data Model.</p><p>Before commencing the process, you will need to determine where these associations exist and their multiplicity (e.g., one-to-one, one-to-many, etc.).
 <i><b>NOTE:</b> These steps will need to be repeated for each association.</i></p><p>1.
 The first Association I will deal with is the relationship between <b><code><nowiki>cust_orders</nowiki></code></b> and <b><code><nowiki>cust_info</nowiki></code></b>, identified by the presence of the Scalar Property <b><code><nowiki>cust_no</nowiki></code></b> in both entities.
 This is a one-to-one relationship, as an entry in a customer order may only be associated with one customer&#39;s information.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc02.png" style="wikiautogen"><br><br></p><p>2.
 To add the Association, right-click on the <b><code>Customer</code></b> entity.
 Then, click <strong>Add</strong> -&gt; <strong>Association</strong>.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc03.png" style="wikiautogen"><br><br></p><p>3.
 You will now see the <strong>Add Association</strong> dialog.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc04.png" style="wikiautogen"><br><br></p><p>4.
 Hit <strong>OK</strong>.
 The diagram will be refreshed to include the newly created association.<br><br></p><p>5.
 You now need to edit the mappings associated with the newly created association, so right-click the association on the diagram and select <strong>Table Mapping</strong> to display the <strong>Mapping Details</strong> pane.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc05.png" style="wikiautogen"><br><br></p><p>6.
 Click the line that reads <b>&lt;Add a Table or View&gt;</b> to reveal a drop down list of all entities.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc06.png" style="wikiautogen"><br><br></p><p>7.
 Here you need to select the entity on the right/far side of the association (the entity where the foreign key exists).
 In this example, it is the <b><code><nowiki>cust_orders</nowiki></code></b> entity.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc07.png" style="wikiautogen"><br><br></p><p>8.
 The <strong>Mapping Details</strong> pane now refreshes to display both ends of the association.
 You will now be required to provide relevant target store data types in the <strong>Column</strong> column for the key fields, as depicted here.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc08.png" style="wikiautogen"><br><br></p><p>9.
 Once the mapping is complete, you can build the project using <strong>Build</strong> -&gt; <strong>Build Solution</strong>.
 <i><b>NOTE:</b> It is worthwhile to (re)build as each association is made, since the error messages can be a little confusing.</i> <br><br><br><img src="VirtIngresAssociations/VirtIngresAssc09.png" style="wikiautogen"><br><br></p><p>10.
 This should result in the following error, which is included here, since I (the author) found it misleading.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc10.png" style="wikiautogen"><br><br> <br>This error indicates that there are two sources — in this case, the <b><code><nowiki>cust_orders</nowiki></code></b> entity&#39;s Scalar Property <b><code><nowiki>cust_no</nowiki></code></b> and the Navigation Property <b><code><nowiki>cust_info</nowiki></code></b> in  — which are being mapped to the same target column — the Ingres column <b><code><nowiki>cust_orders.cust_no</nowiki></code></b> — which is not supported.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc11.png" style="wikiautogen"><br><br></p><p>11.
 The solution is simple!  Delete the mapping for Scalar Property <b><code><nowiki>cust_orders.cust_no</nowiki></code></b>.
 Its only purpose is to hold data representing a relationship/association (it is a Foreign Key), which has already been represented by the newly-created association and resulting Navigation Property <b><code><nowiki>cust_no</nowiki></code></b>.<br><br> <br>Right-click on <b><code><nowiki>cust_orders.cust_no</nowiki></code></b>.
 Then, click <strong>Delete</strong>.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc12.png" style="wikiautogen"><br><br></p><p>12.
 The model diagram will refresh to reflect this change.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc14.png" style="wikiautogen"><br><br></p><p>13.
 Build the project, again, using <strong>Build</strong> -&gt; <strong>Build Solution</strong>.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc09.png" style="wikiautogen"><br><br></p><p>14.
 The project should now build fine.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc13.png" style="wikiautogen"><br><br></p><p>You will need to repeat these steps for each association until you have a completed Entity Data Model.
<br><br><br><img src="VirtIngresAssociations/VirtIngresAssc01.png" style="wikiautogen"><br><br> <br></p></div></body></html>