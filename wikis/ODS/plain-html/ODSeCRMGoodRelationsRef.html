<html><body><div class="topic-text"><h2><a name="ODS eCRM"></a>ODS eCRM GoodRelations<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/GoodRelations&parent=ODSeCRMGoodRelationsRef" class="wikiword">?</a> SPARQL Reference</h2>
<!--Begin of %TOC{}%--><p> </p><div class="MACRO_TOC">  <div class="wikitoc">   <ul> <li><a href="#ODS%20eCRM">ODS eCRM</a></li>
<ul><li><a href="#Companies%20With%20Support%20Cases%20That%20Have%20Not%20Placed%20At%20Least%20One%20Order">Companies With Support Cases That Have Not Placed At Least One Order</a></li> <li><a href="#Evaluators%20Who%27s%20Company%20Has%20Not%20Placed%20At%20Least%20One%20Order">Evaluators Who&#39;s Company Has Not Placed At Least One Order</a></li> <li><a href="#Orders%20By%20Geo%20Location">Orders By Geo Location</a></li> <li><a href="#References">References</a></li> </ul><p>  </p></ul>  </div> </div>
<!--End of %TOC{}%--><p>The following collection offers GoodRelations<a href="http://ods.openlinksw.com:80/dataspace/owiki/wiki/ODS/GoodRelations&parent=ODSeCRMGoodRelationsRef" class="wikiword">?</a> SPARQL queries:</p>
<h3><a name="Companies With Support Cases That Have Not Placed At Least One Order"></a>Companies With Support Cases That Have Not Placed At Least One Order</h3>
<p>In other words get all Evaluators with Closed Support cases who haven&#39;t become Customers.</p>
<br><pre>PREFIX  ecrm: &lt;http://demo.openlinksw.com/schemas/ecrm#&gt;
PREFIX  gr: &lt;http://purl.org/goodrelations/v1#&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
SELECT ?name ?case
FROM &lt;http://demo.openlinksw.com/ecrm&gt;
WHERE
  {
    ?comp a gr:BusinessEntity .
    ?comp foaf:name ?name .
    ?comp ecrm:is_company_of ?case .
    ?case a ecrm:Case.
    OPTIONAL{?comp ecrm:has_order ?order .
                         ?order a ecrm:Order }.
    FILTER (!bound (?order)).
  }
</pre><p> </p>
<ul><li>View Query Results <a href="http://demo.openlinksw.com/sparql?default-graph-uri=&amp;should-sponge=&query=PREFIX++ecrm%3A+%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0D%0APREFIX++gr%3A+%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0D%0APREFIX+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0D%0ASELECT+%3Fname+%3Fcase%0D%0AFROM+%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0D%0AWHERE%0D%0A++%7B%0D%0A++++%3Fcomp+a+gr%3ABusinessEntity+.%0D%0A++++%3Fcomp+foaf%3Aname+%3Fname+.%0D%0A++++%3Fcomp+ecrm%3Ais_company_of+%3Fcase+.%0D%0A++++%3Fcase+a+ecrm%3ACase.%0D%0A++++OPTIONAL%7B%3Fcomp+ecrm%3Ahas_order+%3Forder+.%0D%0A+++++++++++++++++++++++++%3Forder+a+ecrm%3AOrder+%7D.%0D%0A++++FILTER+%28%21bound+%28%3Forder%29%29.%0D%0A++%7D&format=text%2Fhtml&debug=on" class="absuri">(via SPARQL Protocol URL)</a> </li>
<li>View Query Results <a href="http://demo.openlinksw.com/view/?format=application%2Frdf%2Bxml&maxrows=50&query=%0APREFIX%20%20ecrm%3A%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0APREFIX%20%20gr%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0APREFIX%20foaf%3A%20%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0ASELECT%20%3Fname%20%3Fcase%0AFROM%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0AWHERE%0A%20%20%7B%0A%20%20%20%20%3Fcomp%20a%20gr%3ABusinessEntity%20.%0A%20%20%20%20%3Fcomp%20foaf%3Aname%20%3Fname%20.%0A%20%20%20%20%3Fcomp%20ecrm%3Ais_company_of%20%3Fcase%20.%0A%20%20%20%20%3Fcase%20a%20ecrm%3ACase.%0A%20%20%20%20OPTIONAL%7B%3Fcomp%20ecrm%3Ahas_order%20%3Forder%20.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Forder%20a%20ecrm%3AOrder%20%7D.%0A%20%20%20%20FILTER%20(%21bound%20(%3Forder)).%0A%20%20%7D&endpoint=/sparql&maxrows=50&amp;default-graph-uri=" class="absuri">(via iSPARQL Results URL)</a> </li>
<li>View Query Editor <a href="http://demo.openlinksw.com/isparql/?query=PREFIX%20%20ecrm%3A%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0APREFIX%20%20gr%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0APREFIX%20foaf%3A%20%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0ASELECT%20%3Fname%20%3Fcase%0AFROM%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0AWHERE%0A%20%20%7B%0A%20%20%20%20%3Fcomp%20a%20gr%3ABusinessEntity%20.%0A%20%20%20%20%3Fcomp%20foaf%3Aname%20%3Fname%20.%0A%20%20%20%20%3Fcomp%20ecrm%3Ais_company_of%20%3Fcase%20.%0A%20%20%20%20%3Fcase%20a%20ecrm%3ACase.%0A%20%20%20%20OPTIONAL%7B%3Fcomp%20ecrm%3Ahas_order%20%3Forder%20.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Forder%20a%20ecrm%3AOrder%20%7D.%0A%20%20%20%20FILTER%20(%21bound%20(%3Forder)).%0A%20%20%7D&endpoint=/sparql&maxrows=50&amp;default-graph-uri=" class="absuri">(via iSPARQL Visual Query Editor URL)</a></li>
</ul><h3><a name="Evaluators Who's Company Has Not Placed At Least One Order"></a>Evaluators Who&#39;s Company Has Not Placed At Least One Order</h3>
<p>In other words get all Evaluators that haven&#39;t become customers.</p>
<br><pre>PREFIX ecrm: &lt;http://demo.openlinksw.com/schemas/ecrm#&gt;
PREFIX gr: &lt;http://purl.org/goodrelations/v1#&gt;
PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
SELECT ?name
FROM &lt;http://demo.openlinksw.com/ecrm&gt;
WHERE
  {
    ?comp a gr:BusinessEntity .
    ?comp foaf:name ?name .
    OPTIONAL {?comp ecrm:has_order ?order .
                          ?order a ecrm:Order }.
    FILTER (!bound (?order)).
  }
</pre><p> </p>
<ul><li>View Query Results <a href="http://demo.openlinksw.com/sparql?default-graph-uri=&amp;should-sponge=&query=PREFIX+ecrm%3A+%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0D%0APREFIX+gr%3A+%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0D%0APREFIX+foaf%3A+%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0D%0ASELECT+%3Fname%0D%0AFROM+%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0D%0AWHERE%0D%0A++%7B%0D%0A++++%3Fcomp+a+gr%3ABusinessEntity+.%0D%0A++++%3Fcomp+foaf%3Aname+%3Fname+.%0D%0A++++OPTIONAL+%7B%3Fcomp+ecrm%3Ahas_order+%3Forder+.%0D%0A++++++++++++++++++++++++++%3Forder+a+ecrm%3AOrder+%7D.%0D%0A++++FILTER+%28%21bound+%28%3Forder%29%29.%0D%0A++%7D&format=text%2Fhtml&debug=on" class="absuri">(via SPARQL Protocol URL)</a> </li>
<li>View Query Results <a href="http://demo.openlinksw.com/view/?format=application%2Frdf%2Bxml&maxrows=50&query=%0APREFIX%20ecrm%3A%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0APREFIX%20gr%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0APREFIX%20foaf%3A%20%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0ASELECT%20%3Fname%0AFROM%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0AWHERE%0A%20%20%7B%0A%20%20%20%20%3Fcomp%20a%20gr%3ABusinessEntity%20.%0A%20%20%20%20%3Fcomp%20foaf%3Aname%20%3Fname%20.%0A%20%20%20%20OPTIONAL%20%7B%3Fcomp%20ecrm%3Ahas_order%20%3Forder%20.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Forder%20a%20ecrm%3AOrder%20%7D.%0A%20%20%20%20FILTER%20(%21bound%20(%3Forder)).%0A%20%20%7D&endpoint=/sparql&maxrows=50&amp;default-graph-uri=" class="absuri">(via iSPARQL Results URL)</a> </li>
<li>View Query Editor <a href="http://demo.openlinksw.com/isparql/?query=PREFIX%20ecrm%3A%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0APREFIX%20gr%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0APREFIX%20foaf%3A%20%3Chttp%3A%2F%2Fxmlns.com%2Ffoaf%2F0.1%2F%3E%0ASELECT%20%3Fname%0AFROM%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0AWHERE%0A%20%20%7B%0A%20%20%20%20%3Fcomp%20a%20gr%3ABusinessEntity%20.%0A%20%20%20%20%3Fcomp%20foaf%3Aname%20%3Fname%20.%0A%20%20%20%20OPTIONAL%20%7B%3Fcomp%20ecrm%3Ahas_order%20%3Forder%20.%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Forder%20a%20ecrm%3AOrder%20%7D.%0A%20%20%20%20FILTER%20(%21bound%20(%3Forder)).%0A%20%20%7D&endpoint=/sparql&maxrows=50&amp;default-graph-uri=" class="absuri">(via iSPARQL Visual Query Editor URL)</a></li>
</ul><h3><a name="Orders By Geo Location"></a>Orders By Geo Location</h3>
<br><pre>PREFIX ecrm: &lt;http://demo.openlinksw.com/schemas/ecrm#&gt;
PREFIX gr: &lt;http://purl.org/goodrelations/v1#&gt;
SELECT *
FROM &lt;http://demo.openlinksw.com/ecrm&gt;
WHERE 
  {
    ?order a gr:Offering .
    ?order ecrm:shipCountry ?country .
    FILTER (?country LIKE &#39;%Russia%&#39;).
  }
</pre><ul><li>View Query Results <a href="http://demo.openlinksw.com/sparql?default-graph-uri=&amp;should-sponge=&query=PREFIX+ecrm%3A+%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0D%0APREFIX+gr%3A+%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0D%0ASELECT+*%0D%0AFROM+%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0D%0AWHERE+%0D%0A++%7B%0D%0A++++%3Forder+a+gr%3AOffering+.%0D%0A++++%3Forder+ecrm%3AshipCountry+%3Fcountry+.%0D%0A++++FILTER+%28%3Fcountry+LIKE+%27%25Russia%25%27%29.%0D%0A++%7D&format=text%2Fhtml&debug=on" class="absuri">(via SPARQL Protocol URL)</a> </li>
<li>View Query Results <a href="http://demo.openlinksw.com/view/?format=application%2Frdf%2Bxml&maxrows=50&query=%0APREFIX%20ecrm%3A%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0APREFIX%20gr%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0ASELECT%20*%0AFROM%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0AWHERE%20%0A%20%20%7B%0A%20%20%20%20%3Forder%20a%20gr%3AOffering%20.%0A%20%20%20%20%3Forder%20ecrm%3AshipCountry%20%3Fcountry%20.%0A%20%20%20%20FILTER%20(%3Fcountry%20LIKE%20%27%25Russia%25%27).%0A%20%20%7D&endpoint=/sparql&maxrows=50&amp;default-graph-uri=" class="absuri">(via iSPARQL Results URL)</a> </li>
<li>View Query Editor <a href="http://demo.openlinksw.com/isparql/?query=PREFIX%20ecrm%3A%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fschemas%2Fecrm%23%3E%0APREFIX%20gr%3A%20%3Chttp%3A%2F%2Fpurl.org%2Fgoodrelations%2Fv1%23%3E%0ASELECT%20*%0AFROM%20%3Chttp%3A%2F%2Fdemo.openlinksw.com%2Fecrm%3E%0AWHERE%20%0A%20%20%7B%0A%20%20%20%20%3Forder%20a%20gr%3AOffering%20.%0A%20%20%20%20%3Forder%20ecrm%3AshipCountry%20%3Fcountry%20.%0A%20%20%20%20FILTER%20(%3Fcountry%20LIKE%20%27%25Russia%25%27).%0A%20%20%7D&endpoint=/sparql&maxrows=50&amp;default-graph-uri=" class="absuri">(via iSPARQL Visual Query Editor URL)</a></li>
</ul><p> </p>
<h3><a name="References"></a>References</h3>
<ul><li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/ECRMRef" class="absuri">eCRM SPARQL SIOC Reference</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/GoodRelationsRef" class="absuri">Virtuoso GoodRelations SPARQL Reference Collection</a> </li>
<li><a href="http://www.heppnetz.de/ontologies/goodrelations/v1" class="absuri">GoodRelations Ontology</a> </li>
<li><a href="http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFViewODSeCRM" class="absuri">eCRM Linked Data Views</a> </li>
</ul></div></body></html>