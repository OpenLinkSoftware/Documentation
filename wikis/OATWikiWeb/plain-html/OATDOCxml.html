<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="OATDOCIndex"}%--><p> </p>
<!--End of %META:TOPICPARENT{name="OATDOCIndex"}%--><p> </p>
<h1><a name="xml.js"></a> xml.js</h1>
<p>Useful function for XML access and manipulation.</p>
<!--Begin of %TOC{}%--><p> </p><div class="MACRO_TOC">  <div class="wikitoc">   <ul> <li><a href="#Functions">Functions</a></li>
<ul><li><a href="#OAT.Xml.createXmlDoc%28string%29">OAT.Xml.createXmlDoc(string)</a></li> <li><a href="#OAT.Xml.transformXSLT%28xmlDoc%2C%20xslDoc%5B%2C%20paramsArray%5D%29">OAT.Xml.transformXSLT(xmlDoc, xslDoc[, paramsArray])</a></li> <li><a href="#OAT.Xml.textValue%28node%29">OAT.Xml.textValue(node)</a></li> <li><a href="#OAT.Xml.localName%28node%29">OAT.Xml.localName(node)</a></li> <li><a href="#OAT.Xml.childElements%28node%29">OAT.Xml.childElements(node)</a></li> <li><a href="#OAT.Xml.getElementsByLocalName%28node%2C%20localName%29">OAT.Xml.getElementsByLocalName(node, localName)</a></li> <li><a href="#OAT.Xml.getLocalAttribute%28node%2C%20attributeName%29">OAT.Xml.getLocalAttribute(node, attributeName)</a></li> <li><a href="#OAT.Xml.removeDefaultNamespace%28string%29">OAT.Xml.removeDefaultNamespace(string)</a></li> <li><a href="#OAT.Xml.xpath%28xmlDoc%2C%20xPathQuery%2C%20nsObject%29">OAT.Xml.xpath(xmlDoc, xPathQuery, nsObject)</a></li> <li><a href="#OAT.Xml.escape%28xml%29">OAT.Xml.escape(xml)</a></li> <li><a href="#OAT.Xml.unescape%28txt%29">OAT.Xml.unescape(txt)</a></li> </ul><li><a href="#Examples">Examples</a></li><ul><li><a href="#Example%201">Example 1</a></li> <li><a href="#Example%202">Example 2</a></li> </ul><p>  </p></ul>  </div> </div>
<!--End of %TOC{}%--><h2><a name="Functions"></a> Functions</h2>
<h3><a name="OAT.Xml.createXmlDoc(string)"></a> OAT.Xml.createXmlDoc(string)</h3>
<p>Parses a string of XML data and returns a document object.</p>
<h3><a name="OAT.Xml.transformXSLT(xmlDoc, xslDoc[, paramsArray])"></a> OAT.Xml.transformXSLT(xmlDoc, xslDoc[, paramsArray])</h3>
<p>Applies a XSLT template.
 <tt>xslDoc</tt> is a template to be applied to <tt>xmlDoc</tt>.
 Both arguments must be valid XML documents (not strings).
 The third (optional) argument is an array of XSLT parameters.
 Each parameter is a triple (array), which consists of <tt>Namespace</tt>, <tt>Name</tt>, and <tt>Value</tt>.</p>
<h3><a name="OAT.Xml.textValue(node)"></a> OAT.Xml.textValue(node)</h3>
<p>Returns a text value of <tt>node</tt>.
 So, for the markup below, the <tt>textValue</tt>of tag is <tt>content</tt> --</p>
<br><pre>&lt;tag&gt;content&lt;/tag&gt;
</pre><p> </p>
<h3><a name="OAT.Xml.localName(node)"></a> OAT.Xml.localName(node)</h3>
<p>Returns <tt>node</tt>&#39;s local name - the part without namespace prefix.&lt;xsl:template&gt; has a <tt>localName</tt> template.</p>
<h3><a name="OAT.Xml.childElements(node)"></a> OAT.Xml.childElements(node)</h3>
<p>Returns all child nodes which are ordinary elements (i.e., no#textnodes, etc.).</p>
<h3><a name="OAT.Xml.getElementsByLocalName(node, localName)"></a> OAT.Xml.getElementsByLocalName(node, localName)</h3>
<p>Identical to <tt>getElementsByTagName</tt>, but looks only into non-namespace part of tag name.</p>
<h3><a name="OAT.Xml.getLocalAttribute(node, attributeName)"></a> OAT.Xml.getLocalAttribute(node, attributeName)</h3>
<p>Returns a value of attribute whose non-prefixed name is <tt>attributeName</tt></p>
<h3><a name="OAT.Xml.removeDefaultNamespace(string)"></a> OAT.Xml.removeDefaultNamespace(string)</h3>
<p>Takes an XML document in <tt>string</tt> form and removes default namespace.
 This is useful when we want to use XPath queries against such a document, since these cannot be executed against documents with default namespaces.
 Returns XML string.</p>
<h3><a name="OAT.Xml.xpath(xmlDoc, xPathQuery, nsObject)"></a> OAT.Xml.xpath(xmlDoc, xPathQuery, nsObject)</h3>
<p>Runs an XPath query (xPathQuery) against <tt>xmlDoc</tt>.
 Namespaces are resolved as properties of <tt>nsObject</tt>.</p>
<h3><a name="OAT.Xml.escape(xml)"></a> OAT.Xml.escape(xml)</h3>
<p>Returns escaped.</p>
<h3><a name="OAT.Xml.unescape(txt)"></a> OAT.Xml.unescape(txt)</h3>
<p>Returns unescaped.</p>
<h2><a name="Examples"></a> Examples</h2>
<h3><a name="Example 1"></a> Example 1</h3>
<br><pre>var xmlDoc, xslDoc; // somehow fill these with data
var params = [
        [&quot;myNS&quot;,&quot;myparam1&quot;,&quot;myvalue1&quot;],
        [&quot;myNS&quot;,&quot;myparam2&quot;,&quot;myvalue2&quot;]
]
var result = OAT.Xml.transformXSLT(xmlDoc, xslDoc, params);
</pre><p> </p>
<h3><a name="Example 2"></a> Example 2</h3>
<br><pre>var xmlString = &#39;&lt;?xml version=&quot;1.0&quot; ?&gt;&lt;document&gt;&lt;node&gt;value&lt;/node&gt;&lt;node /&gt;&lt;/document&gt;&#39;;
var xmlDoc = OAT.Xml.createXmlDoc(xmlString);
var nodeArray = OAT.Xml.xpath(xmlDoc, &#39;//node&#39;, {});
alert(nodeArray.length); // 2
</pre><p> <a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/CategoryDocumentation" class="wikiword">CategoryDocumentation</a> <a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/CategoryOAT" class="wikiword">CategoryOAT</a> <a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/CategoryOpenSource" class="wikiword">CategoryOpenSource</a></p>
</div></body></html>