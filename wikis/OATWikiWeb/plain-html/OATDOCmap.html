<html><body><div class="topic-text"><!--Begin of %META:TOPICPARENT{name="OATDOCIndex"}%--><p> </p>
<!--End of %META:TOPICPARENT{name="OATDOCIndex"}%--><p> </p>
<h1><a name="map.js"></a> map.js</h1>
<p>Abstract API atop various mapping providers.</p>
<!--Begin of %TOC{}%--><p> </p><div class="MACRO_TOC">  <div class="wikitoc">   <ul> <li><a href="#Objects">Objects</a></li>
<ul><li><a href="#OAT.Map%28something%2C%20provider%2C%20optionsObject%2C%20specificOptions%29">OAT.Map(something, provider, optionsObject, specificOptions)</a></li> </ul><li><a href="#Methods">Methods</a></li><ul><li><a href="#OAT.Map%3A%3AaddTypeControl%28%29">OAT.Map::addTypeControl()</a></li> <li><a href="#OAT.Map%3A%3AaddMapControl%28%29">OAT.Map::addMapControl()</a></li> <li><a href="#OAT.Map%3A%3AsetMapType%28type%29">OAT.Map::setMapType(type)</a></li> <li><a href="#OAT.Map%3A%3AcenterAndZoom%28lat%2C%20long%2C%20zoom%29">OAT.Map::centerAndZoom(lat, long, zoom)</a></li> <li><a href="#OAT.Map%3A%3AsetZoom%28zoom%29">OAT.Map::setZoom(zoom)</a></li> <li><a href="#OAT.Map%3A%3AgetZoom%28%29">OAT.Map::getZoom()</a></li> <li><a href="#OAT.Map%3A%3AaddMarker%28group%2C%20lat%2C%20long%2C%20file%2C%20w%2C%20h%2C%20callback%29">OAT.Map::addMarker(group, lat, long, file, w, h, callback)</a></li> <li><a href="#OAT.Map%3A%3AremoveMarker%28marker%29">OAT.Map::removeMarker(marker)</a></li> <li><a href="#OAT.Map%3A%3AremoveMarkers%28group%29">OAT.Map::removeMarkers(group)</a></li> <li><a href="#OAT.Map%3A%3AopenWindow%28marker%2C%20something%29">OAT.Map::openWindow(marker, something)</a></li> <li><a href="#OAT.Map%3A%3AcloseWindow%28%29">OAT.Map::closeWindow()</a></li> <li><a href="#OAT.Map%3A%3AoptimalPosition%28pointArray%29">OAT.Map::optimalPosition(pointArray)</a></li> <li><a href="#OAT.Map%3A%3AgeoCode%28address%2C%20callback%29">OAT.Map::geoCode(address, callback)</a></li> </ul><li><a href="#Constants">Constants</a></li><ul><li><a href="#OAT.MapData.TYPE_">OAT.MapData.TYPE_</a></li> <li><a href="#OAT.MapData.MAP_">OAT.MapData.MAP_</a></li> <li><a href="#OAT.MapData.FIX_">OAT.MapData.FIX_</a></li> </ul><li><a href="#Example">Example</a></li><p>  </p></ul>  </div> </div>
<!--End of %TOC{}%--><h2><a name="Objects"></a> Objects</h2>
<h3><a name="OAT.Map(something, provider, optionsObject, specificOptions)"></a> OAT.Map(something, provider, optionsObject, specificOptions)</h3>
<p>Creates a <tt>map</tt> as a child of <tt>something</tt>.
 <tt>provider</tt> is one of <tt>TYPE_</tt> constants.
 <tt>optionsObject</tt> may contain: </p>
<ul><li><tt> <b>fix</b></tt> - one of <tt>FIX_</tt> constants, used when markers are too close to each other </li>
<li><tt> <b>fixDistance</b></tt> - distance for shifting markers </li>
<li><tt> <b>fixEpsilon</b></tt> - euclidean distance limit of markers to be taken as identical (in degrees).
 The <tt>specificOptions</tt> object may contain any engine-specific options, such as <tt>{draggableCursor:crosshair}</tt> for Google Maps.</li>
</ul><h2><a name="Methods"></a> Methods</h2>
<h3><a name="OAT.Map::addTypeControl()"></a> OAT.Map::addTypeControl()</h3>
<p>Adds a &#39;map type&#39; control to the map.</p>
<h3><a name="OAT.Map::addMapControl()"></a> OAT.Map::addMapControl()</h3>
<p>Adds a &#39;map navigation&#39; control to the map.</p>
<h3><a name="OAT.Map::setMapType(type)"></a> OAT.Map::setMapType(type)</h3>
<p>Sets map <tt>type</tt> to one of <tt>MAP_</tt> constants.</p>
<h3><a name="OAT.Map::centerAndZoom(lat, long, zoom)"></a> OAT.Map::centerAndZoom(lat, long, zoom)</h3>
<p>Pans the map to given <tt>lat</tt> and <tt>long</tt> coordinates and zooms.
 <tt>zoom</tt> ranges from 0 (far) to 16 (close).</p>
<h3><a name="OAT.Map::setZoom(zoom)"></a> OAT.Map::setZoom(zoom)</h3>
<p>Changes current <tt>zoom</tt> level.</p>
<h3><a name="OAT.Map::getZoom()"></a> OAT.Map::getZoom()</h3>
<p>Returns current <tt>zoom</tt> level.</p>
<h3><a name="OAT.Map::addMarker(group, lat, long, file, w, h, callback)"></a> OAT.Map::addMarker(group, lat, long, file, w, h, callback)</h3>
<p>Adds a <tt>marker</tt> to the map.
 Marker belongs to marker <tt>group</tt> group(any internal value) and is located at coordinates specified in <tt>lat</tt> and <tt>long</tt>.
 <tt>file</tt> specifies an image file name (wandhare its dimensions), false when default image should be used.
 Finally, <tt>callback</tt> is a function to be executed when user clicks marker.</p>
<h3><a name="OAT.Map::removeMarker(marker)"></a> OAT.Map::removeMarker(marker)</h3>
<p>Removes existing <tt>marker</tt>.</p>
<h3><a name="OAT.Map::removeMarkers(group)"></a> OAT.Map::removeMarkers(group)</h3>
<p>Removes all markers which belong to <tt>group</tt>.</p>
<h3><a name="OAT.Map::openWindow(marker, something)"></a> OAT.Map::openWindow(marker, something)</h3>
<p>Opens window, anchored to <tt>marker</tt>.
 <tt>something</tt> is a DOM node to be appended into window.</p>
<h3><a name="OAT.Map::closeWindow()"></a> OAT.Map::closeWindow()</h3>
<p>Closes opened window.</p>
<h3><a name="OAT.Map::optimalPosition(pointArray)"></a> OAT.Map::optimalPosition(pointArray)</h3>
<p>Zooms map so all points specified in <tt>pointArray</tt> (array of 2-element arrays) can be visible simultaneously.</p>
<h3><a name="OAT.Map::geoCode(address, callback)"></a> OAT.Map::geoCode(address, callback)</h3>
<p>Performs a geocoding lookup of <tt>address</tt>.
 When result is returned, <tt>callback</tt> is executed.
 Its only argument is false when no result was found, or an array of[lat,long].</p>
<h2><a name="Constants"></a> Constants</h2>
<h3><a name="OAT.MapData.TYPE_"></a> OAT.MapData.TYPE_</h3>
<p>Constants specifying maps provider</p>
<ul><li><tt><b>OAT.MapData.TYPE_G</b></tt> - specifies Google Maps </li>
<li><tt><b>OAT.MapData.TYPE_Y</b></tt> - specifies Yahoo! Maps </li>
<li><tt><b>OAT.MapData.TYPE_MS</b></tt> - specifies Microsoft Virtual Earth Maps </li>
<li><tt><b>OAT.MapData.TYPE_OL</b></tt> - specifies OpenLayers<a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/OpenLayers&parent=OATDOCmap" class="wikiword">?</a> Maps</li>
</ul><h3><a name="OAT.MapData.MAP_"></a> OAT.MapData.MAP_</h3>
<p>Constants specifying map types.</p>
<ul><li><tt><b>OAT.MapData.MAP_MAP</b></tt> - specifies normal </li>
<li><tt><b>OAT.MapData.MAP_ORTO</b></tt> - specifies orthographic </li>
<li><tt><b>OAT.MapData.MAP_HYB</b></tt> - specifies hybrid</li>
</ul><h3><a name="OAT.MapData.FIX_"></a> OAT.MapData.FIX_</h3>
<p>Constants specifying how markers that are too close to each other will be handled.</p>
<ul><li><tt><b>OAT.MapData.FIX_NONE</b></tt> - unhandled </li>
<li><tt><b>OAT.MapData.FIX_ROUND1</b></tt> - specifies arranged into a circle, with one marker in the middle </li>
<li><tt><b>OAT.MapData.FIX_ROUND2</b></tt> - specifies arranged into a circle </li>
<li><tt><b>OAT.MapData.FIX_STACK</b></tt> - specifies stacked</li>
</ul><h2><a name="Example"></a> Example</h2>
<br><pre>var obj = {
        fix:OAT.MapData.FIX_ROUND1,
        fixDistance:20,
        fixEpsilon:0.5
}
var map = new OAT.Map(&quot;myDiv&quot;,OAT.MapData.TYPE_G,obj);
map.centerAndZoom(0,0,8); /* africa, middle zoom */
map.addTypeControl();
map.addMapControl();
map.setMapType(OAT.MapData.MAP_ORTO); /* aerial */
</pre><p> <a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/CategoryDocumentation" class="wikiword">CategoryDocumentation</a> <a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/CategoryOAT" class="wikiword">CategoryOAT</a> <a href="http://wikis.openlinksw.com:80/dataspace/owiki/wiki/OATWikiWeb/CategoryOpenSource" class="wikiword">CategoryOpenSource</a></p>
</div></body></html>