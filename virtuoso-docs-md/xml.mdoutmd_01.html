<div id="xmlthtmloutmd_01" class="section">

<div class="titlepage">

<div>

<div>

### 14.3.10. Post VSP XSLT Transformation Mode

</div>

</div>

</div>

The Virtuoso server can perform server-side XSLT transformations on the
internal stream data. Suppose we have an XML document, we can tell the
HTTP server to invoke XSLT processor before sending the reply to the
user agent. We do this by making a call to the
<a href="fn_http_xslt.html" class="link"
title="http_xslt">http_xslt()</a> function inside VSP or any procedure
called from it and pass the URL of the stylesheet and probably some
parameters.

<a href="fn_http_xslt.html" class="link" title="http_xslt"><code
class="code">http_xslt(in </code><em><code>style_sheet_URI</code></em><code
class="code"> varchar [, in </code><em><code>parameters</code></em><code
class="code"> any])</code></a>

The VSP page will produce an XML document, rather than HTML. The XSL
stylesheet will then produce the required output for the user-agent,
which could be more XML or HTML.

The XSL stylesheet could also be generated using VSP.

<div id="id38662" class="example">

**Example 14.13. In Server Transformation of XML**

<div class="example-contents">

``` programlisting
<?vsp
declare ses any;
ses := string_output ();
xml_auto ('select ShipperID, CompanyName, Phone from Demo.demo.Shippers
  for xml auto element', '', ses);

http ('<list>');
http (string_output_string (ses));
http ('</list>');
http_xslt ('file:/samples/xslt/shippers.xsl');
?>
```

Where shippers.xsl will have the following content:

``` programlisting
<?xml version="1.0"?>

<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="html"/>

  <xsl:template match="/">
<html>
<head>
<title>Shippers list</title>
</head>
<body link="#0000b4" vlink="#0000b4" bgcolor="#ffffff">
<xsl:apply-templates/>
</body>
</html>
</xsl:template>

  <xsl:template match="list">
<table>
<tr><td>ID</td><td>Name</td><td>Phone</td></tr>
<xsl:apply-templates/>
</table>
</xsl:template>

  <xsl:template match="Shippers">
<tr>
<td><xsl:value-of select="ShipperID"/></td>
<td><xsl:value-of select="CompanyName"/></td>
<td><xsl:value-of select="Phone"/></td>
</tr>
</xsl:template>
</xsl:stylesheet>
```

</div>

</div>

  

</div>
